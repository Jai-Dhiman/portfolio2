import{j as u}from"./three.js";import{r as h}from"./vendor.js";import{u as B}from"./index.js";import"./ui.js";const k=({glitchColors:g})=>{const s=h.useRef(null),o=h.useRef(null),l=B(),d=()=>g||(l?["#FFD93D","#FF6B6B","#4F9D9D"]:["#4338CA","#6366F1","#312E81","#1E1B4B"]),b=16,f=10,m=20,w=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","!","@","#","$","&","*","(",")","-","_","+","=","/","[","]","{","}",";",":","<",">",",","0","1","2","3","4","5","6","7","8","9"],v=()=>w[Math.floor(Math.random()*w.length)],R=()=>d()[Math.floor(Math.random()*d().length)],y=(e,r)=>{const t=Math.ceil(e/f),n=Math.ceil(r/m);return{columns:t,rows:n}},E=(e,r)=>{const t=e*r;return Array.from({length:t},()=>({char:v(),color:R()}))},p=()=>{const e=s.current;if(!e)return;const r=e.parentElement;if(!r)return;const t=window.devicePixelRatio||1,n=r.getBoundingClientRect();e.width=n.width*t,e.height=n.height*t,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,o.current&&o.current.setTransform(t,0,0,t,0,0);const{columns:c,rows:a}=y(n.width,n.height),i=E(c,a);M(i,c)},M=(e,r)=>{if(!o.current||e.length===0)return;const t=o.current,{width:n,height:c}=s.current.getBoundingClientRect();t.clearRect(0,0,n,c),t.font=`${b}px monospace`,t.textBaseline="top",e.forEach((a,i)=>{const S=i%r*f,_=Math.floor(i/r)*m;t.fillStyle=a.color,t.fillText(a.char,S,_)})};h.useEffect(()=>{const e=s.current;if(!e)return;o.current=e.getContext("2d"),p();let r;const t=()=>{clearTimeout(r),r=setTimeout(()=>{p()},100)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[l]);const x=l?{background:"bg-black",outerVignette:"bg-[radial-gradient(circle,_rgba(0,0,0,0)_60%,_rgba(0,0,0,1)_100%)]"}:{background:"bg-gray-50",outerVignette:"bg-[radial-gradient(circle,_rgba(249,250,251,0)_60%,_rgba(249,250,251,1)_100%)]"};return u.jsxs("div",{className:`relative w-full h-full ${x.background} overflow-hidden`,children:[u.jsx("canvas",{ref:s,className:"block w-full h-full"}),u.jsx("div",{className:`absolute top-0 left-0 w-full h-full pointer-events-none ${x.outerVignette}`})]})};export{k as default};
