import{j as e}from"./routing-BSN3S3oA.js";import{r as t}from"./vendor-zk0hAXhS.js";import{C as r,a as n,P as s,E as i,L as o,e as a,V as c,u as l,b as u,d as p,f as m,g as d,h as y,R as h,B as f,i as x,M as g,j as w}from"./three-EzcU16ZB.js";function j({position:a=[0,0,30],gravity:c=[0,-40,0],fov:l=35,transparent:u=!1}){const[p,m]=t.useState(!1),[d,y]=t.useState(!1);return t.useEffect(()=>{(()=>{if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return void y(!0);const e=(()=>{try{const e=document.createElement("canvas");return null!==(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}})(),t=(()=>{try{const e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}catch(e){return!1}})();y(!e||!t)})()},[]),p||d?e.jsx("div",{className:"w-full h-screen"}):e.jsx("div",{className:"relative z-0 w-full h-screen flex justify-center items-center transform scale-100 origin-center",children:e.jsxs(r,{camera:{position:a,fov:l},gl:{alpha:u,antialias:!1,powerPreference:"high-performance"},onCreated:({gl:e})=>{try{e.setClearColor(new n(0),u?0:1),e.setPixelRatio(Math.min(window.devicePixelRatio,2))}catch(t){m(!0)}},onError:e=>{m(!0)},children:[e.jsx("ambientLight",{intensity:10}),e.jsx(s,{gravity:c,timeStep:1/30,children:e.jsx(b,{})}),e.jsxs(i,{blur:.75,background:!1,children:[e.jsx(o,{intensity:2.5,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[50,.1,1]}),e.jsx(o,{intensity:2.5,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[50,.1,1]})]})]})})}function b({maxSpeed:r=50,minSpeed:n=0}){const s=t.useRef(null),i=t.useRef(null),o=t.useRef(null),a=t.useRef(null),g=t.useRef(null),w=t.useRef(null),j=new c,b=new c,P=new c,v=new c,z={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:4,linearDamping:4},{nodes:M,materials:E}=l("/assets/card-BP4TWJmK.glb"),S=u("/assets/profilepic-BZ_h-oty.png");S.flipY=!1,S.repeat.set(1.25,1.25),S.offset.set(.3,.15),S.center.set(.5,.5),S.rotation=0;const[R]=t.useState(()=>new p([new c,new c,new c,new c,new c])),[C,L]=t.useState(!1),[N,F]=t.useState(!1),[k,B]=t.useState(()=>"undefined"!=typeof window&&window.innerWidth<1024);return t.useEffect(()=>{const e=()=>{B(window.innerWidth<1024)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),m(i,o,[[0,0,0],[0,0,0],1]),m(o,a,[[0,0,0],[0,0,0],1]),m(a,g,[[0,0,0],[0,0,0],1]),d(g,w,[[0,0,0],[0,1.45,0]]),t.useEffect(()=>{if(N)return document.body.style.cursor=C?"grabbing":"grab",()=>{document.body.style.cursor="auto"}},[N,C]),t.useEffect(()=>{if(s.current?.geometry){const e=[new c(0,0,0),new c(0,-1,0)];s.current.geometry.setPoints(e)}},[]),y((e,t)=>{if(C&&"boolean"!=typeof C&&(j.set(e.pointer.x,e.pointer.y,.5).unproject(e.camera),v.copy(j).sub(e.camera.position).normalize(),j.add(v.multiplyScalar(e.camera.position.length())),[w,o,a,g,i].forEach(e=>e.current?.wakeUp()),w.current?.setNextKinematicTranslation({x:j.x-C.x,y:j.y-C.y,z:j.z-C.z})),i.current&&o.current&&a.current&&g.current&&w.current&&s.current?.geometry){[o,a].forEach(e=>{const s=e.current.translation?.();if(!s)return;e.current.lerped||(e.current.lerped=(new c).copy(s));const i=e.current.lerped.distanceTo(s),o=Math.max(.1,Math.min(1,i));e.current.lerped.lerp(s,t*(n+o*(r-n)))});const e=w.current.translation?.(),l=g.current.translation?.(),u=a.current.lerped,p=o.current.lerped,m=i.current.translation?.();if(!(e&&l&&u&&p&&m))return;if(((...e)=>e.some(e=>!Number.isFinite(e)))(e.x,e.y,e.z,l.x,l.y,l.z,u.x,u.y,u.z,p.x,p.y,p.z,m.x,m.y,m.z))return;const d=new c(e.x,e.y+.25,e.z);R.points[0].copy(d),R.points[1].copy(l),R.points[2].copy(u),R.points[3].copy(p),R.points[4]=(new c).copy(m);const y=R.getPoints(32);y.every(e=>Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z))&&s.current.geometry.setPoints(y),b.copy(w.current.angvel()),P.copy(w.current.rotation()),w.current.setAngvel({x:b.x,y:b.y-.25*P.y,z:b.z})}}),R.curveType="chordal",e.jsxs(e.Fragment,{children:[e.jsxs("group",{position:[0,6,0],children:[e.jsx(h,{ref:i,...z,type:"fixed",position:[0,0,0]}),e.jsx(h,{position:[0,-.5,0],ref:o,...z,type:"dynamic",children:e.jsx(f,{args:[.1]})}),e.jsx(h,{position:[0,-1,0],ref:a,...z,type:"dynamic",children:e.jsx(f,{args:[.1]})}),e.jsx(h,{position:[0,-1.5,0],ref:g,...z,type:"dynamic",children:e.jsx(f,{args:[.1]})}),e.jsxs(h,{position:[0,-2,0],ref:w,...z,type:C?"kinematicPosition":"dynamic",children:[e.jsx(x,{args:[.8,1.125,.01]}),e.jsx("group",{scale:1.2,position:[0,-1.2,-.05],onPointerOver:()=>F(!0),onPointerOut:()=>F(!1),onPointerUp:e=>{e.target.releasePointerCapture(e.pointerId),L(!1)},onPointerDown:e=>{e.target.setPointerCapture(e.pointerId),L((new c).copy(e.point).sub(j.copy(w.current.translation())))},children:M&&E?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{geometry:M.card.geometry,children:e.jsx("meshPhysicalMaterial",{map:S,clearcoat:1,clearcoatRoughness:.15,roughness:.9,metalness:.8})}),e.jsx("mesh",{geometry:M.clip.geometry,material:E.metal,"material-roughness":.3}),e.jsx("mesh",{geometry:M.clamp.geometry,material:E.metal})]}):e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1.6,2.25,.02]}),e.jsx("meshPhysicalMaterial",{color:"#ffffff",clearcoat:1,clearcoatRoughness:.15,roughness:.9,metalness:.8})]})})]})]}),e.jsxs("mesh",{ref:s,children:[e.jsx("meshLineGeometry",{points:[new c(0,0,0),new c(0,-1,0)]}),e.jsx("meshLineMaterial",{color:"black",depthTest:!0,resolution:k?[1e3,2e3]:[1e3,1e3],lineWidth:1,transparent:!1,opacity:1})]})]})}a({MeshLineGeometry:g,MeshLineMaterial:w});export{j as default};
