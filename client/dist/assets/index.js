const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage.js","assets/three.js","assets/vendor.js","assets/animations.js","assets/GradientText.js","assets/ui.js","assets/CaptureDeepDive.js"])))=>i.map(i=>d[i]);
var gi=Object.defineProperty;var mi=(e,t,n)=>t in e?gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var le=(e,t,n)=>mi(e,typeof t!="symbol"?t+"":t,n);import{j as k,_ as rr,c as yi}from"./three.js";import{r as fe,u as ir,L as Pe,R as ur,B as bi,b as Ei,c as Zt}from"./vendor.js";import{Q as _i,a as Ti}from"./ui.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const a of u.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();function wi(){const[e,t]=fe.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem("theme");return n==="dark"||!n&&window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});return fe.useEffect(()=>{e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]),{darkMode:e,setDarkMode:t}}function Hc(){const[e,t]=fe.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);return fe.useEffect(()=>{const n=()=>{t(document.documentElement.classList.contains("dark"))};n();const r=new MutationObserver(n);return r.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()},[]),e}function Wc(){const[e,t]=fe.useState(()=>typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1);return fe.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=i=>{t(i.matches)};return n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[]),e}function Si(){const{darkMode:e,setDarkMode:t}=wi(),n=ir(),[r,i]=fe.useState(!1);return k.jsxs("nav",{className:"sticky top-0 z-50 glass-effect",children:[k.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[k.jsx(Pe,{to:"/",className:"h-8",children:k.jsx("img",{src:"/icons/portfolioIcon.png",alt:"Jai Dhiman",className:"h-full w-auto object-contain hover-lift"})}),k.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[k.jsx(Pe,{to:"/",className:`text-sm font-medium transition-colors hover:text-primary-600 dark:hover:text-accent-gold ${n.pathname==="/"?"text-primary-600 dark:text-accent-gold":"text-gray-700 dark:text-gray-300"}`,children:"Portfolio"}),k.jsx(Pe,{to:"/capture",className:`text-sm font-medium transition-colors hover:text-primary-600 dark:hover:text-accent-gold ${n.pathname==="/capture"?"text-primary-600 dark:text-accent-gold":"text-gray-700 dark:text-gray-300"}`,children:"Capture Case Study"})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("button",{onClick:()=>i(!r),className:"md:hidden btn-secondary p-2","aria-label":"Toggle mobile menu",children:k.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),k.jsx("button",{onClick:()=>t(!e),className:"btn-secondary p-2","aria-label":"Toggle theme",children:e?k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]})]}),r&&k.jsx("div",{className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white/95 dark:bg-dark-400/95 backdrop-blur-sm",children:k.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-2",children:[k.jsx(Pe,{to:"/",onClick:()=>i(!1),className:`block py-2 text-sm font-medium transition-colors hover:text-primary-600 dark:hover:text-accent-gold ${n.pathname==="/"?"text-primary-600 dark:text-accent-gold":"text-gray-700 dark:text-gray-300"}`,children:"Portfolio"}),k.jsx(Pe,{to:"/capture",onClick:()=>i(!1),className:`block py-2 text-sm font-medium transition-colors hover:text-primary-600 dark:hover:text-accent-gold ${n.pathname==="/capture"?"text-primary-600 dark:text-accent-gold":"text-gray-700 dark:text-gray-300"}`,children:"Capture Case Study"})]})})]})}function Ii(){const e=[{name:"GitHub",url:"https://github.com/Jai-Dhiman",icon:k.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})},{name:"LinkedIn",url:"https://linkedin.com/in/Jai-D",icon:k.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}];return k.jsx("footer",{className:"mt-auto py-8 glass-effect",children:k.jsx("div",{className:"container mx-auto px-4",children:k.jsxs("div",{className:"flex flex-col items-center gap-4",children:[k.jsx("div",{className:"flex gap-6",children:e.map(t=>k.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"nav-link hover-lift","aria-label":t.name,download:t.name==="Resume",children:t.icon},t.name))}),k.jsxs("p",{className:"text-sm highlight",children:["Â© ",new Date().getFullYear()," Jai Dhiman"]})]})})})}function Ai({children:e}){return k.jsxs("div",{className:"min-h-screen",children:[k.jsx(Si,{}),k.jsx("main",{className:"container mx-auto px-4 py-8",children:e}),k.jsx(Ii,{})]})}const ki=()=>k.jsx("div",{className:"loader",children:k.jsx("div",{className:"loader-dot"})});var Ct=function(e,t){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ct(e,t)};function J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ct(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var S=function(){return S=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},S.apply(this,arguments)};function Rt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function _(e,t,n,r){function i(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function o(d){try{s(r.next(d))}catch(l){a(l)}}function c(d){try{s(r.throw(d))}catch(l){a(l)}}function s(d){d.done?u(d.value):i(d.value).then(o,c)}s((r=r.apply(e,t||[])).next())})}function E(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,i,u,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(s){return function(d){return c([s,d])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(u=s[0]&2?i.return:s[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,s[1])).done)return u;switch(i=0,u&&(s=[s[0]&2,u.value]),s[0]){case 0:case 1:u=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!u||s[1]>u[0]&&s[1]<u[3])){n.label=s[1];break}if(s[0]===6&&n.label<u[1]){n.label=u[1],u=s;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(s);break}u[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],i=0}finally{r=u=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function x(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,u=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)u.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return u}function L(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,u;r<i;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}function Se(e){return this instanceof Se?(this.v=e,this):new Se(e)}function Pi(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,u=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(f){return function(v){return Promise.resolve(v).then(f,l)}}function o(f,v){r[f]&&(i[f]=function(m){return new Promise(function(y,p){u.push([f,m,y,p])>1||c(f,m)})},v&&(i[f]=v(i[f])))}function c(f,v){try{s(r[f](v))}catch(m){h(u[0][3],m)}}function s(f){f.value instanceof Se?Promise.resolve(f.value.v).then(d,l):h(u[0][2],f)}function d(f){c("next",f)}function l(f){c("throw",f)}function h(f,v){f(v),u.shift(),u.length&&c(u[0][0],u[0][1])}}function Ci(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof x=="function"?x(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(u){n[u]=e[u]&&function(a){return new Promise(function(o,c){a=e[u](a),i(o,c,a.done,a.value)})}}function i(u,a,o,c){Promise.resolve(c).then(function(s){u({value:s,done:o})},a)}}var Te;(function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"})(Te||(Te={}));var pe;(function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"})(pe||(pe={}));var en="-",st="AMP",Ri="".concat(st,"_unsent"),ar="https://api2.amplitude.com/2/httpapi",Oi="https://api.eu.amplitude.com/2/httpapi",xi="https://api2.amplitude.com/batch",Li="https://api.eu.amplitude.com/batch",Ni=1e3,Ot=function(e){if(Object.keys(e).length>Ni)return!1;for(var t in e){var n=e[t];if(!or(t,n))return!1}return!0},or=function(e,t){var n,r;if(typeof e!="string")return!1;if(Array.isArray(t)){var i=!0;try{for(var u=x(t),a=u.next();!a.done;a=u.next()){var o=a.value;if(Array.isArray(o))return!1;if(typeof o=="object")i=i&&Ot(o);else if(!["number","string"].includes(typeof o))return!1;if(!i)return!1}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}else{if(t==null)return!1;if(typeof t=="object")return Ot(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0},et=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return S({},this._properties)},e.prototype.set=function(t,n){return this._safeSet(N.SET,t,n),this},e.prototype.setOnce=function(t,n){return this._safeSet(N.SET_ONCE,t,n),this},e.prototype.append=function(t,n){return this._safeSet(N.APPEND,t,n),this},e.prototype.prepend=function(t,n){return this._safeSet(N.PREPEND,t,n),this},e.prototype.postInsert=function(t,n){return this._safeSet(N.POSTINSERT,t,n),this},e.prototype.preInsert=function(t,n){return this._safeSet(N.PREINSERT,t,n),this},e.prototype.remove=function(t,n){return this._safeSet(N.REMOVE,t,n),this},e.prototype.add=function(t,n){return this._safeSet(N.ADD,t,n),this},e.prototype.unset=function(t){return this._safeSet(N.UNSET,t,en),this},e.prototype.clearAll=function(){return this._properties={},this._properties[N.CLEAR_ALL]=en,this},e.prototype._safeSet=function(t,n,r){if(this._validate(t,n,r)){var i=this._properties[t];return i===void 0&&(i={},this._properties[t]=i),i[n]=r,this._propertySet.add(n),!0}return!1},e.prototype._validate=function(t,n,r){return this._properties[N.CLEAR_ALL]!==void 0||this._propertySet.has(n)?!1:t===N.ADD?typeof r=="number":t!==N.UNSET&&t!==N.REMOVE?or(n,r):!0},e}(),N;(function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"})(N||(N={}));var Di=[N.CLEAR_ALL,N.UNSET,N.SET,N.SET_ONCE,N.ADD,N.APPEND,N.PREPEND,N.PREINSERT,N.POSTINSERT,N.REMOVE],Mi="Event tracked successfully",Ui="Unexpected error occurred",ji="Event rejected due to exceeded retry count",Fi="Event skipped due to optOut config",qi="Event rejected due to missing API key",Vi="Invalid API key",$i="Client not initialized",$;(function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"})($||($={}));var Ie=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=$.Unknown),{event:e,code:t,message:n}},H=function(){var e="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[e]<"u")return globalThis[e];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},Bi=function(e){return e?(e^Math.random()*16>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,be)},tn=L([],R(Array(256).keys()),!1).map(function(e){return e.toString(16).padStart(2,"0")}),be=function(e){var t,n=H();if(!(!((t=n==null?void 0:n.crypto)===null||t===void 0)&&t.getRandomValues))return Bi(e);var r=n.crypto.getRandomValues(new Uint8Array(16));return r[6]=r[6]&15|64,r[8]=r[8]&63|128,L([],R(r.entries()),!1).map(function(i){var u=R(i,2),a=u[0],o=u[1];return[4,6,8,10].includes(a)?"-".concat(tn[o]):tn[o]}).join("")},Gi=function(){function e(t){this.client=t,this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(t,n){var r,i;return _(this,void 0,void 0,function(){return E(this,function(u){switch(u.label){case 0:return this.plugins.some(function(a){return a.name===t.name})?(this.loggerProvider.warn("Plugin with name ".concat(t.name," already exists, skipping registration")),[2]):(t.name===void 0&&(t.name=be(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(t.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),t.type=(r=t.type)!==null&&r!==void 0?r:"enrichment",[4,(i=t.setup)===null||i===void 0?void 0:i.call(t,n,this.client)]);case 1:return u.sent(),this.plugins.push(t),[2]}})})},e.prototype.deregister=function(t,n){var r;return _(this,void 0,void 0,function(){var i,u;return E(this,function(a){switch(a.label){case 0:return i=this.plugins.findIndex(function(o){return o.name===t}),i===-1?(n.loggerProvider.warn("Plugin with name ".concat(t," does not exist, skipping deregistration")),[2]):(u=this.plugins[i],this.plugins.splice(i,1),[4,(r=u.teardown)===null||r===void 0?void 0:r.call(u)]);case 1:return a.sent(),[2]}})})},e.prototype.reset=function(t){this.applying=!1;var n=this.plugins;n.map(function(r){var i;return(i=r.teardown)===null||i===void 0?void 0:i.call(r)}),this.plugins=[],this.client=t},e.prototype.push=function(t){var n=this;return new Promise(function(r){n.queue.push([t,r]),n.scheduleApply(0)})},e.prototype.scheduleApply=function(t){var n=this;this.applying||(this.applying=!0,setTimeout(function(){n.apply(n.queue.shift()).then(function(){n.applying=!1,n.queue.length>0&&n.scheduleApply(0)})},t))},e.prototype.apply=function(t){return _(this,void 0,void 0,function(){var n,r,i,u,a,o,c,f,v,s,d,l,h,f,v,m,y,p,g,b,T,I;return E(this,function(w){switch(w.label){case 0:if(!t)return[2];n=R(t,1),r=n[0],i=R(t,2),u=i[1],this.loggerProvider.log("Timeline.apply: Initial event",r),a=this.plugins.filter(function(A){return A.type==="before"}),w.label=1;case 1:w.trys.push([1,6,7,8]),o=x(a),c=o.next(),w.label=2;case 2:return c.done?[3,5]:(f=c.value,f.execute?[4,f.execute(S({},r))]:[3,4]);case 3:if(v=w.sent(),v===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(r))),u({event:r,code:0,message:""}),[2];r=v,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(r))),w.label=4;case 4:return c=o.next(),[3,2];case 5:return[3,8];case 6:return s=w.sent(),g={error:s},[3,8];case 7:try{c&&!c.done&&(b=o.return)&&b.call(o)}finally{if(g)throw g.error}return[7];case 8:d=this.plugins.filter(function(A){return A.type==="enrichment"||A.type===void 0}),w.label=9;case 9:w.trys.push([9,14,15,16]),l=x(d),h=l.next(),w.label=10;case 10:return h.done?[3,13]:(f=h.value,f.execute?[4,f.execute(S({},r))]:[3,12]);case 11:if(v=w.sent(),v===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(r))),u({event:r,code:0,message:""}),[2];r=v,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(r))),w.label=12;case 12:return h=l.next(),[3,10];case 13:return[3,16];case 14:return m=w.sent(),T={error:m},[3,16];case 15:try{h&&!h.done&&(I=l.return)&&I.call(l)}finally{if(T)throw T.error}return[7];case 16:return y=this.plugins.filter(function(A){return A.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(r))),p=y.map(function(A){var C=S({},r);return A.execute(C).catch(function(O){return Ie(C,0,String(O))})}),Promise.all(p).then(function(A){var C=R(A,1),O=C[0],U=O||Ie(r,100,"Event not tracked, no destination plugins on the instance");u(U)}),[2]}})})},e.prototype.flush=function(){return _(this,void 0,void 0,function(){var t,n,r,i=this;return E(this,function(u){switch(u.label){case 0:return t=this.queue,this.queue=[],[4,Promise.all(t.map(function(a){return i.apply(a)}))];case 1:return u.sent(),n=this.plugins.filter(function(a){return a.type==="destination"}),r=n.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(r)];case 2:return u.sent(),[2]}})})},e.prototype.onIdentityChanged=function(t){this.plugins.forEach(function(n){var r;(r=n.onIdentityChanged)===null||r===void 0||r.call(n,t)})},e.prototype.onSessionIdChanged=function(t){this.plugins.forEach(function(n){var r;(r=n.onSessionIdChanged)===null||r===void 0||r.call(n,t)})},e.prototype.onOptOutChanged=function(t){this.plugins.forEach(function(n){var r;(r=n.onOptOutChanged)===null||r===void 0||r.call(n,t)})},e}(),Hi=function(e,t,n){var r=typeof e=="string"?{event_type:e}:e;return S(S(S({},r),n),t&&{event_properties:t})},sr=function(e,t){var n=S(S({},t),{event_type:pe.IDENTIFY,user_properties:e.getUserProperties()});return n},Wi=function(e,t,n,r){var i,u=S(S({},r),{event_type:pe.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(i={},i[e]=t,i)});return u},Ki=function(e,t,n){var r,i=new et;i.set(e,t);var u=S(S({},n),{event_type:pe.IDENTIFY,user_properties:i.getUserProperties(),groups:(r={},r[e]=t,r)});return u},zi=function(e,t){return S(S({},t),{event_type:pe.REVENUE,event_properties:e.getEventProperties()})},ee=function(e){return{promise:e||Promise.resolve()}},Yi=function(){function e(t){t===void 0&&(t="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Gi(this),this.name=t}return e.prototype._init=function(t){return _(this,void 0,void 0,function(){return E(this,function(n){switch(n.label){case 0:return this.config=t,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return n.sent(),this.isReady=!0,[2]}})})},e.prototype.runQueuedFunctions=function(t){return _(this,void 0,void 0,function(){var n,r,i,u,a,o,c,s;return E(this,function(d){switch(d.label){case 0:n=this[t],this[t]=[],d.label=1;case 1:d.trys.push([1,8,9,10]),r=x(n),i=r.next(),d.label=2;case 2:return i.done?[3,7]:(u=i.value,a=u(),a&&"promise"in a?[4,a.promise]:[3,4]);case 3:return d.sent(),[3,6];case 4:return[4,a];case 5:d.sent(),d.label=6;case 6:return i=r.next(),[3,2];case 7:return[3,10];case 8:return o=d.sent(),c={error:o},[3,10];case 9:try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(c)throw c.error}return[7];case 10:return this[t].length?[4,this.runQueuedFunctions(t)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[2]}})})},e.prototype.track=function(t,n,r){var i=Hi(t,n,r);return ee(this.dispatch(i))},e.prototype.identify=function(t,n){var r=sr(t,n);return ee(this.dispatch(r))},e.prototype.groupIdentify=function(t,n,r,i){var u=Wi(t,n,r,i);return ee(this.dispatch(u))},e.prototype.setGroup=function(t,n,r){var i=Ki(t,n,r);return ee(this.dispatch(i))},e.prototype.revenue=function(t,n){var r=zi(t,n);return ee(this.dispatch(r))},e.prototype.add=function(t){return this.isReady?this._addPlugin(t):(this.q.push(this._addPlugin.bind(this,t)),ee())},e.prototype._addPlugin=function(t){return ee(this.timeline.register(t,this.config))},e.prototype.remove=function(t){return this.isReady?this._removePlugin(t):(this.q.push(this._removePlugin.bind(this,t)),ee())},e.prototype._removePlugin=function(t){return ee(this.timeline.deregister(t,this.config))},e.prototype.dispatchWithCallback=function(t,n){if(!this.isReady)return n(Ie(t,0,$i));this.process(t).then(n)},e.prototype.dispatch=function(t){return _(this,void 0,void 0,function(){var n=this;return E(this,function(r){return this.isReady?[2,this.process(t)]:[2,new Promise(function(i){n.dispatchQ.push(n.dispatchWithCallback.bind(n,t,i))})]})})},e.prototype.getOperationAppliedUserProperties=function(t){var n={};if(t===void 0)return n;var r={};return Object.keys(t).forEach(function(i){Object.values(Te).includes(i)||(r[i]=t[i])}),Di.forEach(function(i){if(Object.keys(t).includes(i)){var u=t[i];switch(i){case Te.CLEAR_ALL:Object.keys(n).forEach(function(a){delete n[a]});break;case Te.UNSET:Object.keys(u).forEach(function(a){delete n[a]});break;case Te.SET:Object.assign(n,u);break}}}),Object.assign(n,r),n},e.prototype.process=function(t){return _(this,void 0,void 0,function(){var n,u,r,i,u;return E(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.config.optOut?[2,Ie(t,0,Fi)]:(t.event_type===pe.IDENTIFY&&(n=this.getOperationAppliedUserProperties(t.user_properties),this.timeline.onIdentityChanged({userProperties:n})),[4,this.timeline.push(t)]);case 1:return u=a.sent(),u.code===200?this.config.loggerProvider.log(u.message):u.code===100?this.config.loggerProvider.warn(u.message):this.config.loggerProvider.error(u.message),[2,u];case 2:return r=a.sent(),i=String(r),this.config.loggerProvider.error(i),u=Ie(t,0,i),[2,u];case 3:return[2]}})})},e.prototype.setOptOut=function(t){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!t));return}this._setOptOut(t)},e.prototype._setOptOut=function(t){this.config.optOut!==t&&(this.timeline.onOptOutChanged(t),this.config.optOut=!!t)},e.prototype.flush=function(){return ee(this.timeline.flush())},e.prototype.plugin=function(t){var n=this.timeline.plugins.find(function(r){return r.name===t});if(n===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(t));return}return n},e.prototype.plugins=function(t){return this.timeline.plugins.filter(function(n){return n instanceof t})},e}(),Xi=function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(t){return this.productId=t,this},e.prototype.setQuantity=function(t){return t>0&&(this.quantity=t),this},e.prototype.setPrice=function(t){return this.price=t,this},e.prototype.setRevenueType=function(t){return this.revenueType=t,this},e.prototype.setCurrency=function(t){return this.currency=t,this},e.prototype.setRevenue=function(t){return this.revenue=t,this},e.prototype.setReceipt=function(t){return this.receipt=t,this},e.prototype.setReceiptSig=function(t){return this.receiptSig=t,this},e.prototype.setEventProperties=function(t){return Ot(t)&&(this.properties=t),this},e.prototype.getEventProperties=function(){var t=this.properties?S({},this.properties):{};return t[ae.REVENUE_PRODUCT_ID]=this.productId,t[ae.REVENUE_QUANTITY]=this.quantity,t[ae.REVENUE_PRICE]=this.price,t[ae.REVENUE_TYPE]=this.revenueType,t[ae.REVENUE_CURRENCY]=this.currency,t[ae.REVENUE]=this.revenue,t[ae.RECEIPT]=this.receipt,t[ae.RECEIPT_SIG]=this.receiptSig,t},e}(),ae;(function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE_CURRENCY="$currency",e.REVENUE="$revenue",e.RECEIPT="$receipt",e.RECEIPT_SIG="$receiptSig"})(ae||(ae={}));var Qi=function(e,t){var n=Math.max(t,1);return e.reduce(function(r,i,u){var a=Math.floor(u/n);return r[a]||(r[a]=[]),r[a].push(i),r},[])},te;(function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug"})(te||(te={}));var $e="Amplitude Logger ",cr=function(){function e(){this.logLevel=te.None}return e.prototype.disable=function(){this.logLevel=te.None},e.prototype.enable=function(t){t===void 0&&(t=te.Warn),this.logLevel=t},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<te.Verbose||console.log("".concat($e,"[Log]: ").concat(t.join(" ")))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<te.Warn||console.warn("".concat($e,"[Warn]: ").concat(t.join(" ")))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<te.Error||console.error("".concat($e,"[Error]: ").concat(t.join(" ")))},e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<te.Debug||console.log("".concat($e,"[Debug]: ").concat(t.join(" ")))},e}(),Ke=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:te.Warn,loggerProvider:new cr,offline:!1,optOut:!1,serverUrl:ar,serverZone:"US",useBatch:!1}},Ji=function(){function e(t){var n,r,i,u;this._optOut=!1;var a=Ke();this.apiKey=t.apiKey,this.flushIntervalMillis=(n=t.flushIntervalMillis)!==null&&n!==void 0?n:a.flushIntervalMillis,this.flushMaxRetries=t.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=t.flushQueueSize||a.flushQueueSize,this.instanceName=t.instanceName||a.instanceName,this.loggerProvider=t.loggerProvider||a.loggerProvider,this.logLevel=(r=t.logLevel)!==null&&r!==void 0?r:a.logLevel,this.minIdLength=t.minIdLength,this.plan=t.plan,this.ingestionMetadata=t.ingestionMetadata,this.offline=t.offline!==void 0?t.offline:a.offline,this.optOut=(i=t.optOut)!==null&&i!==void 0?i:a.optOut,this.serverUrl=t.serverUrl,this.serverZone=t.serverZone||a.serverZone,this.storageProvider=t.storageProvider,this.transportProvider=t.transportProvider,this.useBatch=(u=t.useBatch)!==null&&u!==void 0?u:a.useBatch,this.loggerProvider.enable(this.logLevel);var o=dr(t.serverUrl,t.serverZone,t.useBatch);this.serverZone=o.serverZone,this.serverUrl=o.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut=t},enumerable:!1,configurable:!0}),e}(),Zi=function(e,t){return e==="EU"?t?Li:Oi:t?xi:ar},dr=function(e,t,n){if(e===void 0&&(e=""),t===void 0&&(t=Ke().serverZone),n===void 0&&(n=Ke().useBatch),e)return{serverUrl:e,serverZone:void 0};var r=["US","EU"].includes(t)?t:Ke().serverZone;return{serverZone:r,serverUrl:Zi(r,n)}},lr=function(){function e(){this.sdk={metrics:{histogram:{}}}}return e.prototype.recordHistogram=function(t,n){this.sdk.metrics.histogram[t]=n},e}();function eu(e){return e instanceof Error?e.message:String(e)}function Be(e){var t="";try{"body"in e&&(t=JSON.stringify(e.body,null,2))}catch{}return t}var tu=function(){function e(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[]}return e.prototype.setup=function(t){var n;return _(this,void 0,void 0,function(){var r,i=this;return E(this,function(u){switch(u.label){case 0:return this.config=t,this.storageKey="".concat(Ri,"_").concat(this.config.apiKey.substring(0,10)),[4,(n=this.config.storageProvider)===null||n===void 0?void 0:n.get(this.storageKey)];case 1:return r=u.sent(),r&&r.length>0&&Promise.all(r.map(function(a){return i.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},e.prototype.execute=function(t){var n=this;return t.insert_id||(t.insert_id=be()),new Promise(function(r){var i={event:t,attempts:0,callback:function(u){return r(u)},timeout:0};n.queue.push(i),n.schedule(n.config.flushIntervalMillis),n.saveEvents()})},e.prototype.removeEventsExceedFlushMaxRetries=function(t){var n=this;return t.filter(function(r){return r.attempts+=1,r.attempts<n.config.flushMaxRetries?!0:(n.fulfillRequest([r],500,ji),!1)})},e.prototype.scheduleEvents=function(t){var n=this;t.forEach(function(r){n.schedule(r.timeout===0?n.config.flushIntervalMillis:r.timeout)})},e.prototype.schedule=function(t){var n=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&t>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=t,this.scheduleId=setTimeout(function(){n.queue=n.queue.map(function(r){return r.timeout=0,r}),n.flush(!0)},t);return}},e.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},e.prototype.flush=function(t){return t===void 0&&(t=!1),_(this,void 0,void 0,function(){var n,r,i,u=this;return E(this,function(a){switch(a.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),n=[],r=[],this.queue.forEach(function(o){return o.timeout===0?n.push(o):r.push(o)}),i=Qi(n,this.config.flushQueueSize),[4,i.reduce(function(o,c){return _(u,void 0,void 0,function(){return E(this,function(s){switch(s.label){case 0:return[4,o];case 1:return s.sent(),[4,this.send(c,t)];case 2:return[2,s.sent()]}})})},Promise.resolve())]);case 1:return a.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},e.prototype.send=function(t,n){return n===void 0&&(n=!0),_(this,void 0,void 0,function(){var r,i,u,a,o;return E(this,function(c){switch(c.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(t,400,qi)];r={api_key:this.config.apiKey,events:t.map(function(s){var d=s.event;d.extra;var l=Rt(d,["extra"]);return l}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new lr,c.label=1;case 1:return c.trys.push([1,3,,4]),i=dr(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,r)];case 2:return u=c.sent(),u===null?(this.fulfillRequest(t,0,Ui),[2]):n?(this.handleResponse(u,t),[3,4]):("body"in u?this.fulfillRequest(t,u.statusCode,"".concat(u.status,": ").concat(Be(u))):this.fulfillRequest(t,u.statusCode,u.status),[2]);case 3:return a=c.sent(),o=eu(a),this.config.loggerProvider.error(o),this.handleResponse({status:$.Failed,statusCode:0},t),[3,4];case 4:return[2]}})})},e.prototype.handleResponse=function(t,n){var r=t.status;switch(r){case $.Success:{this.handleSuccessResponse(t,n);break}case $.Invalid:{this.handleInvalidResponse(t,n);break}case $.PayloadTooLarge:{this.handlePayloadTooLargeResponse(t,n);break}case $.RateLimit:{this.handleRateLimitResponse(t,n);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(r,"' provided for ").concat(n.length,' events"}')),this.handleOtherResponse(n);break}}},e.prototype.handleSuccessResponse=function(t,n){this.fulfillRequest(n,t.statusCode,Mi)},e.prototype.handleInvalidResponse=function(t,n){var r=this;if(t.body.missingField||t.body.error.startsWith(Vi)){this.fulfillRequest(n,t.statusCode,t.body.error);return}var i=L(L(L(L([],R(Object.values(t.body.eventsWithInvalidFields)),!1),R(Object.values(t.body.eventsWithMissingFields)),!1),R(Object.values(t.body.eventsWithInvalidIdLengths)),!1),R(t.body.silencedEvents),!1).flat(),u=new Set(i),a=n.filter(function(c,s){if(u.has(s)){r.fulfillRequest([c],t.statusCode,t.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(Be(t));var o=this.removeEventsExceedFlushMaxRetries(a);this.scheduleEvents(o)},e.prototype.handlePayloadTooLargeResponse=function(t,n){if(n.length===1){this.fulfillRequest(n,t.statusCode,t.body.error);return}this.config.loggerProvider.warn(Be(t)),this.config.flushQueueSize/=2;var r=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(r)},e.prototype.handleRateLimitResponse=function(t,n){var r=this,i=Object.keys(t.body.exceededDailyQuotaUsers),u=Object.keys(t.body.exceededDailyQuotaDevices),a=t.body.throttledEvents,o=new Set(i),c=new Set(u),s=new Set(a),d=n.filter(function(h,f){if(h.event.user_id&&o.has(h.event.user_id)||h.event.device_id&&c.has(h.event.device_id)){r.fulfillRequest([h],t.statusCode,t.body.error);return}return s.has(f)&&(h.timeout=r.throttleTimeout),!0});d.length>0&&this.config.loggerProvider.warn(Be(t));var l=this.removeEventsExceedFlushMaxRetries(d);this.scheduleEvents(l)},e.prototype.handleOtherResponse=function(t){var n=this,r=t.map(function(u){return u.timeout=u.attempts*n.retryTimeout,u}),i=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(i)},e.prototype.fulfillRequest=function(t,n,r){this.removeEvents(t),t.forEach(function(i){return i.callback(Ie(i.event,n,r))})},e.prototype.saveEvents=function(){if(this.config.storageProvider){var t=this.queue.map(function(n){return n.event});this.config.storageProvider.set(this.storageKey,t)}},e.prototype.removeEvents=function(t){this.queue=this.queue.filter(function(n){return!t.some(function(r){return r.event.insert_id===n.event.insert_id})}),this.saveEvents()},e}(),nu=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:ru(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),ru=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},iu=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},e.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach(function(n){t(n)}),this.queue=[])},e}(),he=function(){return he=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},he.apply(this,arguments)};function ze(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,u=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)u.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return u}var Ye=function(e,t){var n,r,i=["string","number","boolean","undefined"],u=typeof e,a=typeof t;if(u!==a)return!1;try{for(var o=ze(i),c=o.next();!c.done;c=o.next()){var s=c.value;if(s===u)return e===t}}catch(y){n={error:y}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;var d=Array.isArray(e),l=Array.isArray(t);if(d!==l)return!1;if(d&&l){for(var h=0;h<e.length;h++)if(!Ye(e[h],t[h]))return!1}else{var f=Object.keys(e).sort(),v=Object.keys(t).sort();if(!Ye(f,v))return!1;var m=!0;return Object.keys(e).forEach(function(y){Ye(e[y],t[y])||(m=!1)}),m}return!0},uu="$set",au="$unset",ou="$clearAll";Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r});var su=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var t=this,n=he({},this.identity.userProperties),r=he(he({},this.identity),{userProperties:n});return{setUserId:function(i){return r.userId=i,this},setDeviceId:function(i){return r.deviceId=i,this},setUserProperties:function(i){return r.userProperties=i,this},setOptOut:function(i){return r.optOut=i,this},updateUserProperties:function(i){var u,a,o,c,s,d,l=r.userProperties||{};try{for(var h=ze(Object.entries(i)),f=h.next();!f.done;f=h.next()){var v=nn(f.value,2),m=v[0],y=v[1];switch(m){case uu:try{for(var p=(o=void 0,ze(Object.entries(y))),g=p.next();!g.done;g=p.next()){var b=nn(g.value,2),T=b[0],I=b[1];l[T]=I}}catch(C){o={error:C}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(o)throw o.error}}break;case au:try{for(var w=(s=void 0,ze(Object.keys(y))),A=w.next();!A.done;A=w.next()){var T=A.value;delete l[T]}}catch(C){s={error:C}}finally{try{A&&!A.done&&(d=w.return)&&d.call(w)}finally{if(s)throw s.error}}break;case ou:l={};break}}}catch(C){u={error:C}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(u)throw u.error}}return r.userProperties=l,this},commit:function(){return t.setIdentity(r),this}}},e.prototype.getIdentity=function(){return he({},this.identity)},e.prototype.setIdentity=function(t){var n=he({},this.identity);this.identity=he({},t),Ye(n,this.identity)||this.listeners.forEach(function(r){r(t)})},e.prototype.addIdentityListener=function(t){this.listeners.add(t)},e.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},e}(),Ce=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,cu=function(){function e(){this.identityStore=new su,this.eventBridge=new iu,this.applicationContextProvider=new nu}return e.getInstance=function(t){return Ce.analyticsConnectorInstances||(Ce.analyticsConnectorInstances={}),Ce.analyticsConnectorInstances[t]||(Ce.analyticsConnectorInstances[t]=new e),Ce.analyticsConnectorInstances[t]},e}(),xe=function(e){return e===void 0&&(e="$default_instance"),cu.getInstance(e)},du=function(e,t){xe(t).identityStore.editIdentity().setUserId(e).commit()},lu=function(e,t){xe(t).identityStore.editIdentity().setDeviceId(e).commit()},fu=function(){function e(){this.name="identity",this.type="before",this.identityStore=xe().identityStore}return e.prototype.execute=function(t){return _(this,void 0,void 0,function(){var n;return E(this,function(r){return n=t.user_properties,n&&this.identityStore.editIdentity().updateUserProperties(n).commit(),[2,t]})})},e.prototype.setup=function(t){return _(this,void 0,void 0,function(){return E(this,function(n){return t.instanceName&&(this.identityStore=xe(t.instanceName).identityStore),[2]})})},e}(),fr=function(e,t){t===void 0&&(t=Date.now());var n=Date.now(),r=n-t;return r>e},hr=function(e,t,n){return t===void 0&&(t=""),n===void 0&&(n=10),[st,t,e.substring(0,n)].filter(Boolean).join("_")},hu=function(e){return"".concat(st.toLowerCase(),"_").concat(e.substring(0,6))},vu=function(){var e,t,n,r;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(r=(n=(t=(e=navigator.languages)===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:navigator.language)!==null&&n!==void 0?n:i)!==null&&r!==void 0?r:""},tt=function(){var e,t=H();if(!(!((e=t==null?void 0:t.location)===null||e===void 0)&&e.search))return{};var n=t.location.search.substring(1).split("&").filter(Boolean),r=n.reduce(function(i,u){var a=u.split("=",2),o=rn(a[0]),c=rn(a[1]);return c&&(i[o]=c),i},{});return r},rn=function(e){e===void 0&&(e="");try{return decodeURIComponent(e)}catch{return""}},pu=function(e){var t=new Error().stack||"";return t.split(`
`).slice(2+e).map(function(n){return n.trim()})},j=function(e){return function(){var t=S({},e.config),n=t.loggerProvider,r=t.logLevel;return{logger:n,logLevel:r}}},gu=function(e,t){var n,r;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");try{for(var i=x(t.split(".")),u=i.next();!u.done;u=i.next()){var a=u.value;if(a in e)e=e[a];else return}}catch(o){n={error:o}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e},F=function(e,t){return function(){var n,r,i={};try{for(var u=x(t),a=u.next();!a.done;a=u.next()){var o=a.value;i[o]=gu(e,o)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return i}},q=function(e,t,n,r,i){return i===void 0&&(i=null),function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];var o=n(),c=o.logger,s=o.logLevel;if(s&&s<te.Debug||!s||!c)return e.apply(i,u);var d={type:"invoke public method",name:t,args:u,stacktrace:pu(1),time:{start:new Date().toISOString()},states:{}};r&&d.states&&(d.states.before=r());var l=e.apply(i,u);return l&&l.promise?l.promise.then(function(){r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),c.debug(JSON.stringify(d,null,2))}):(r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),c.debug(JSON.stringify(d,null,2))),l}},jt=function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return _(this,void 0,void 0,function(){return E(this,function(t){return[2,!0]})})},e.prototype.get=function(t){return _(this,void 0,void 0,function(){return E(this,function(n){return[2,this.memoryStorage.get(t)]})})},e.prototype.getRaw=function(t){return _(this,void 0,void 0,function(){var n;return E(this,function(r){switch(r.label){case 0:return[4,this.get(t)];case 1:return n=r.sent(),[2,n?JSON.stringify(n):void 0]}})})},e.prototype.set=function(t,n){return _(this,void 0,void 0,function(){return E(this,function(r){return this.memoryStorage.set(t,n),[2]})})},e.prototype.remove=function(t){return _(this,void 0,void 0,function(){return E(this,function(n){return this.memoryStorage.delete(t),[2]})})},e.prototype.reset=function(){return _(this,void 0,void 0,function(){return E(this,function(t){return this.memoryStorage.clear(),[2]})})},e}(),xt=function(){function e(t){this.options=S({},t)}return e.prototype.isEnabled=function(){return _(this,void 0,void 0,function(){var t,n,r;return E(this,function(i){switch(i.label){case 0:if(!H())return[2,!1];e.testValue=String(Date.now()),t=new e(this.options),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,t.set(n,e.testValue)];case 2:return i.sent(),[4,t.get(n)];case 3:return r=i.sent(),[2,r===e.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,t.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(t){var n;return _(this,void 0,void 0,function(){var r,i;return E(this,function(u){switch(u.label){case 0:return[4,this.getRaw(t)];case 1:if(r=u.sent(),!r)return[2,void 0];try{return i=(n=mu(r))!==null&&n!==void 0?n:yu(r),i===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(t,", value: ").concat(r)),[2,void 0]):[2,JSON.parse(i)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(t,", value: ").concat(r)),[2,void 0]}return[2]}})})},e.prototype.getRaw=function(t){var n,r;return _(this,void 0,void 0,function(){var i,u,a;return E(this,function(o){return i=H(),u=(r=(n=i==null?void 0:i.document)===null||n===void 0?void 0:n.cookie.split("; "))!==null&&r!==void 0?r:[],a=u.find(function(c){return c.indexOf(t+"=")===0}),a?[2,a.substring(t.length+1)]:[2,void 0]})})},e.prototype.set=function(t,n){var r;return _(this,void 0,void 0,function(){var i,u,a,o,c,s,d;return E(this,function(l){try{i=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,u=n!==null?i:-1,a=void 0,u&&(o=new Date,o.setTime(o.getTime()+u*24*60*60*1e3),a=o),c="".concat(t,"=").concat(btoa(encodeURIComponent(JSON.stringify(n)))),a&&(c+="; expires=".concat(a.toUTCString())),c+="; path=/",this.options.domain&&(c+="; domain=".concat(this.options.domain)),this.options.secure&&(c+="; Secure"),this.options.sameSite&&(c+="; SameSite=".concat(this.options.sameSite)),s=H(),s&&(s.document.cookie=c)}catch(h){d=h instanceof Error?h.message:String(h),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(t,". Error: ").concat(d))}return[2]})})},e.prototype.remove=function(t){return _(this,void 0,void 0,function(){return E(this,function(n){switch(n.label){case 0:return[4,this.set(t,null)];case 1:return n.sent(),[2]}})})},e.prototype.reset=function(){return _(this,void 0,void 0,function(){return E(this,function(t){return[2]})})},e}(),mu=function(e){try{return decodeURIComponent(atob(e))}catch{return}},yu=function(e){try{return decodeURIComponent(atob(decodeURIComponent(e)))}catch{return}},bu=function(e,t,n){return n===void 0&&(n=10),[st,t,e.substring(0,n)].filter(Boolean).join("_")},ct=function(){function e(){}return e.prototype.send=function(t,n){return Promise.resolve(null)},e.prototype.buildResponse=function(t){var n,r,i,u,a,o,c,s,d,l,h,f,v,m,y,p,g,b,T,I,w,A;if(typeof t!="object")return null;var C=t.code||0,O=this.buildStatus(C);switch(O){case $.Success:return{status:O,statusCode:C,body:{eventsIngested:(n=t.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(r=t.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=t.server_upload_time)!==null&&i!==void 0?i:0}};case $.Invalid:return{status:O,statusCode:C,body:{error:(u=t.error)!==null&&u!==void 0?u:"",missingField:(a=t.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(o=t.events_with_invalid_fields)!==null&&o!==void 0?o:{},eventsWithMissingFields:(c=t.events_with_missing_fields)!==null&&c!==void 0?c:{},eventsWithInvalidIdLengths:(s=t.events_with_invalid_id_lengths)!==null&&s!==void 0?s:{},epsThreshold:(d=t.eps_threshold)!==null&&d!==void 0?d:0,exceededDailyQuotaDevices:(l=t.exceeded_daily_quota_devices)!==null&&l!==void 0?l:{},silencedDevices:(h=t.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(f=t.silenced_events)!==null&&f!==void 0?f:[],throttledDevices:(v=t.throttled_devices)!==null&&v!==void 0?v:{},throttledEvents:(m=t.throttled_events)!==null&&m!==void 0?m:[]}};case $.PayloadTooLarge:return{status:O,statusCode:C,body:{error:(y=t.error)!==null&&y!==void 0?y:""}};case $.RateLimit:return{status:O,statusCode:C,body:{error:(p=t.error)!==null&&p!==void 0?p:"",epsThreshold:(g=t.eps_threshold)!==null&&g!==void 0?g:0,throttledDevices:(b=t.throttled_devices)!==null&&b!==void 0?b:{},throttledUsers:(T=t.throttled_users)!==null&&T!==void 0?T:{},exceededDailyQuotaDevices:(I=t.exceeded_daily_quota_devices)!==null&&I!==void 0?I:{},exceededDailyQuotaUsers:(w=t.exceeded_daily_quota_users)!==null&&w!==void 0?w:{},throttledEvents:(A=t.throttled_events)!==null&&A!==void 0?A:[]}};case $.Timeout:default:return{status:O,statusCode:C}}},e.prototype.buildStatus=function(t){return t>=200&&t<300?$.Success:t===429?$.RateLimit:t===413?$.PayloadTooLarge:t===408?$.Timeout:t>=400&&t<500?$.Invalid:t>=500?$.Failed:$.Unknown},e}(),Eu=function(e){J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.send=function(n,r){return _(this,void 0,void 0,function(){var i,u,a;return E(this,function(o){switch(o.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(n,i)];case 1:return u=o.sent(),[4,u.text()];case 2:a=o.sent();try{return[2,this.buildResponse(JSON.parse(a))]}catch{return[2,this.buildResponse({code:u.status})]}return[2]}})})},t}(ct),_u=null,Tu=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],vr="data-amp-track-",wu=["div","span","h1","h2","h3","h4","h5","h6"],Su=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],Iu=L(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],R(Su),!1),Au=["*"],ku=1e3,Pu=4,pr=100,Cu=function(){function e(t){this.request=t}return Object.defineProperty(e.prototype,"headers",{get:function(){if(this._headers)return this._headers;var t=this.request.headers;if(Array.isArray(t)){var n=t;this._headers=n.reduce(function(u,a){var o=R(a,2),c=o[0],s=o[1];return u[c]=s,u},{})}else if(t instanceof Headers){var r=t,i={};r.forEach(function(u,a){i[a]=u}),this._headers=i}else typeof t=="object"&&(this._headers=t);return this._headers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var t=H();if(t!=null&&t.TextEncoder){var n=this.request.body;return this._bodySize=gr(n,pr),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),e}(),Ru=function(){function e(t){this.body=t}return Object.defineProperty(e.prototype,"bodySize",{get:function(){return gr(this.body,pr)},enumerable:!1,configurable:!0}),e}();function gr(e,t){var n,r,i,u=H(),a=u==null?void 0:u.TextEncoder;if(a){var o;if(typeof e=="string")o=e,i=new a().encode(o).length;else if(e instanceof Blob)o=e,i=o.size;else if(e instanceof URLSearchParams)o=e,i=new a().encode(o.toString()).length;else if(ArrayBuffer.isView(e))o=e,i=o.byteLength;else if(e instanceof ArrayBuffer)o=e,i=o.byteLength;else if(e instanceof FormData){var c=e,s=0,d=0;try{for(var l=x(c.entries()),h=l.next();!h.done;h=l.next()){var f=R(h.value,2),v=f[0],m=f[1];if(s+=v.length,typeof m=="string")s+=new a().encode(m).length;else if(m instanceof Blob)s+=m.size;else return;if(++d>=t)return}}catch(y){n={error:y}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}i=s}else if(e instanceof ReadableStream){o=e;return}return i}}var Ou=function(){function e(t){this.response=t}return Object.defineProperty(e.prototype,"headers",{get:function(){var t;if(this._headers)return this._headers;if(this.response.headers instanceof Headers){var n=this.response.headers,r={};return(t=n==null?void 0:n.forEach)===null||t===void 0||t.call(n,function(i,u){r[u]=i}),this._headers=r,r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodySize",{get:function(){var t,n;if(this._bodySize!==void 0)return this._bodySize;var r=(n=(t=this.response.headers)===null||t===void 0?void 0:t.get)===null||n===void 0?void 0:n.call(t,"content-length"),i=r?parseInt(r,10):void 0;return this._bodySize=i,i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),e}(),xu=function(){function e(t,n,r){this.statusCode=t,this.headersString=n,this.size=r}return Object.defineProperty(e.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){var t,n;if(this.headersString){var r={},i=this.headersString.split(`\r
`);try{for(var u=x(i),a=u.next();!a.done;a=u.next()){var o=a.value,c=R(o.split(": "),2),s=c[0],d=c[1];s&&d&&(r[s]=d)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return r}},enumerable:!1,configurable:!0}),e}(),Lu=function(){function e(t,n,r,i,u,a,o,c,s,d,l){o===void 0&&(o=0),this.type=t,this.method=n,this.timestamp=r,this.startTime=i,this.url=u,this.requestWrapper=a,this.status=o,this.duration=c,this.responseWrapper=s,this.error=d,this.endTime=l}return e.prototype.toSerializable=function(){var t,n,r,i,u={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(t=this.requestWrapper)===null||t===void 0?void 0:t.headers,requestBodySize:(n=this.requestWrapper)===null||n===void 0?void 0:n.bodySize,responseHeaders:(r=this.responseWrapper)===null||r===void 0?void 0:r.headers,responseBodySize:(i=this.responseWrapper)===null||i===void 0?void 0:i.bodySize};return Object.fromEntries(Object.entries(u).filter(function(a){var o=R(a,2);o[0];var c=o[1];return c!==void 0}))},e}();function Nu(e){return typeof e=="object"&&e!==null&&"url"in e&&"method"in e}var Du=function(){function e(t,n){n===void 0&&(n=be()),this.callback=t,this.id=n}return e}(),Mu=function(){function e(t){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=t;var n=H();e.isSupported()&&(this.globalScope=n)}return e.isSupported=function(){var t=H();return!!t&&!!t.fetch},e.prototype.subscribe=function(t,n){var r,i,u,a,o,c,s;if(this.logger||(this.logger=n),this.eventCallbacks.set(t.id,t),!this.isObserving){var d=(u=(i=(r=this.globalScope)===null||r===void 0?void 0:r.XMLHttpRequest)===null||i===void 0?void 0:i.prototype)===null||u===void 0?void 0:u.open,l=(c=(o=(a=this.globalScope)===null||a===void 0?void 0:a.XMLHttpRequest)===null||o===void 0?void 0:o.prototype)===null||c===void 0?void 0:c.send;d&&l&&this.observeXhr(d,l);var h=(s=this.globalScope)===null||s===void 0?void 0:s.fetch;h&&this.observeFetch(h),this.isObserving=!0}},e.prototype.unsubscribe=function(t){this.eventCallbacks.delete(t.id)},e.prototype.triggerEventCallbacks=function(t){var n=this;this.eventCallbacks.forEach(function(r){var i;try{r.callback(t)}catch(u){(i=n.logger)===null||i===void 0||i.debug("an unexpected error occurred while triggering event callbacks",u)}})},e.prototype.handleNetworkRequestEvent=function(t,n,r,i,u,a,o){var c;if(!(a===void 0||o===void 0)){var s,d="GET";Nu(n)?(s=n.url,d=n.method):s=(c=n==null?void 0:n.toString)===null||c===void 0?void 0:c.call(n),d=(r==null?void 0:r.method)||d;var l,h;i&&(l=i.status),u&&(h={name:u.name||"UnknownError",message:u.message||"An unknown error occurred"},l=0);var f=Math.floor(performance.now()-o),v=Math.floor(a+f),m=new Lu(t,d,a,a,s,r,l,f,i,h,v);this.triggerEventCallbacks(m)}},e.prototype.getTimestamps=function(){var t,n;return{startTime:(t=Date.now)===null||t===void 0?void 0:t.call(Date),durationStart:(n=performance==null?void 0:performance.now)===null||n===void 0?void 0:n.call(performance)}},e.prototype.observeFetch=function(t){var n=this;!this.globalScope||!t||(this.globalScope.fetch=function(r,i){return _(n,void 0,void 0,function(){var u,a,o,c,s,d;return E(this,function(l){switch(l.label){case 0:try{u=this.getTimestamps()}catch(h){(s=this.logger)===null||s===void 0||s.debug("an unexpected error occurred while retrieving timestamps",h)}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,t(r,i)];case 2:return a=l.sent(),[3,4];case 3:return c=l.sent(),o=c,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",r,i?new Cu(i):void 0,a?new Ou(a):void 0,o,u==null?void 0:u.startTime,u==null?void 0:u.durationStart)}catch(h){(d=this.logger)===null||d===void 0||d.debug("an unexpected error occurred while handling fetch",h)}if(a)return[2,a];throw o}})})})},e.prototype.observeXhr=function(t,n){if(!(!this.globalScope||!t||!n)){var r=this.globalScope.XMLHttpRequest.prototype,i=this;r.open=function(){for(var u,a,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var s=this,d=R(o,2),l=d[0],h=d[1];try{s.$$AmplitudeAnalyticsEvent=S({method:l,url:(u=h==null?void 0:h.toString)===null||u===void 0?void 0:u.call(h)},i.getTimestamps())}catch(f){(a=i.logger)===null||a===void 0||a.debug("an unexpected error occurred while calling xhr open",f)}return t.apply(s,o)},r.send=function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];var o=this,c=u[0],s=o.$$AmplitudeAnalyticsEvent;return o.addEventListener("loadend",function(){var d;try{var l=o.getAllResponseHeaders(),h=o.getResponseHeader("content-length"),f=new xu(o.status,l,h?parseInt(h,10):void 0),v=new Ru(c);s.status=o.status,i.handleNetworkRequestEvent("xhr",{url:s.url,method:s.method},v,f,void 0,s.startTime,s.durationStart)}catch(m){(d=i.logger)===null||d===void 0||d.debug("an unexpected error occurred while handling xhr send",m)}}),n.apply(o,u)}}},e}(),un=new Mu,De=function(e,t){return typeof e=="boolean"?e:(e==null?void 0:e[t])!==!1},mr=function(e){return De(e,"attribution")},Uu=function(e){return De(e,"fileDownloads")},ju=function(e){return De(e,"formInteractions")},yr=function(e){return De(e,"pageViews")},an=function(e){return De(e,"sessions")},br=function(e){return typeof e=="object"&&(e.networkTracking===!0||typeof e.networkTracking=="object")},Er=function(e){return typeof e=="boolean"?e:typeof e=="object"&&(e.elementInteractions===!0||typeof e.elementInteractions=="object")},Fu=function(e){return typeof e=="object"&&e.webVitals===!0},_r=function(e){return typeof e=="object"&&(e.frustrationInteractions===!0||typeof e.frustrationInteractions=="object")},qu=function(e){if(Er(e.autocapture)&&typeof e.autocapture=="object"&&typeof e.autocapture.elementInteractions=="object")return e.autocapture.elementInteractions},Vu=function(e){if(_r(e.autocapture)&&typeof e.autocapture=="object"&&typeof e.autocapture.frustrationInteractions=="object")return e.autocapture.frustrationInteractions},$u=function(e){if(br(e.autocapture)){if(typeof e.autocapture=="object"&&typeof e.autocapture.networkTracking=="object")return e.autocapture.networkTracking;if(e.networkTrackingOptions)return e.networkTrackingOptions}},Bu=function(e){var t=function(){return!1},n=void 0,r,i=e.pageCounter,u=yr(e.defaultTracking);return u&&(t=void 0,r=void 0,e.defaultTracking&&typeof e.defaultTracking=="object"&&e.defaultTracking.pageViews&&typeof e.defaultTracking.pageViews=="object"&&("trackOn"in e.defaultTracking.pageViews&&(t=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(n=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(r=e.defaultTracking.pageViews.eventType))),{trackOn:t,trackHistoryChanges:n,eventType:r,pageCounter:i}},Gu=function(e){return mr(e.defaultTracking)&&e.defaultTracking&&typeof e.defaultTracking=="object"&&e.defaultTracking.attribution&&typeof e.defaultTracking.attribution=="object"?S({},e.defaultTracking.attribution):{}},bt=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.name,u=r.args,a=r.resolve,o=e&&e[i];if(typeof o=="function"){var c=o.apply(e,u);typeof a=="function"&&a(c==null?void 0:c.promise)}}return e},Et=function(e){var t=e;return t&&t._q!==void 0},Tr="2.20.1",Hu="amplitude-ts",Wu="Web",Ku="$remote",zu=function(){function e(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(Hu,"/").concat(Tr),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return e.prototype.setup=function(t){return this.config=t,Promise.resolve(void 0)},e.prototype.execute=function(t){var n,r;return _(this,void 0,void 0,function(){var i,u,a,o;return E(this,function(c){return i=new Date().getTime(),u=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1,a=(r=t.event_id)!==null&&r!==void 0?r:u+1,this.config.lastEventId=a,t.time||(this.config.lastEventTime=i),o=S(S(S(S(S(S(S(S({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:Wu}),this.config.trackingOptions.language&&{language:vu()}),this.config.trackingOptions.ipAddress&&{ip:Ku}),{insert_id:be(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),t),{event_id:a,library:this.library,user_agent:this.userAgent}),[2,o]})})},e}(),wr=function(){function e(t){this.storage=t}return e.prototype.isEnabled=function(){return _(this,void 0,void 0,function(){var t,n,r,i;return E(this,function(u){switch(u.label){case 0:if(!this.storage)return[2,!1];t=String(Date.now()),n=new e(this.storage),r="AMP_TEST",u.label=1;case 1:return u.trys.push([1,4,5,7]),[4,n.set(r,t)];case 2:return u.sent(),[4,n.get(r)];case 3:return i=u.sent(),[2,i===t];case 4:return u.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return u.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(t){return _(this,void 0,void 0,function(){var n;return E(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(t)];case 1:return n=r.sent(),n?[2,JSON.parse(n)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},e.prototype.getRaw=function(t){var n;return _(this,void 0,void 0,function(){return E(this,function(r){return[2,((n=this.storage)===null||n===void 0?void 0:n.getItem(t))||void 0]})})},e.prototype.set=function(t,n){var r;return _(this,void 0,void 0,function(){return E(this,function(i){try{(r=this.storage)===null||r===void 0||r.setItem(t,JSON.stringify(n))}catch{}return[2]})})},e.prototype.remove=function(t){var n;return _(this,void 0,void 0,function(){return E(this,function(r){try{(n=this.storage)===null||n===void 0||n.removeItem(t)}catch{}return[2]})})},e.prototype.reset=function(){var t;return _(this,void 0,void 0,function(){return E(this,function(n){try{(t=this.storage)===null||t===void 0||t.clear()}catch{}return[2]})})},e}(),Ge=1e3,Sr=function(e){J(t,e);function t(n){var r=this,i,u,a;try{a=(i=H())===null||i===void 0?void 0:i.localStorage}catch(o){(u=n==null?void 0:n.loggerProvider)===null||u===void 0||u.debug("Failed to access localStorage. error=".concat(JSON.stringify(o))),a=void 0}return r=e.call(this,a)||this,r.loggerProvider=n==null?void 0:n.loggerProvider,r}return t.prototype.set=function(n,r){var i;return _(this,void 0,void 0,function(){var u;return E(this,function(a){switch(a.label){case 0:return Array.isArray(r)&&r.length>Ge?(u=r.length-Ge,[4,e.prototype.set.call(this,n,r.slice(0,Ge))]):[3,2];case 1:return a.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(u," events because the queue length exceeded ").concat(Ge,".")),[3,4];case 2:return[4,e.prototype.set.call(this,n,r)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},t}(wr),Yu=function(e){J(t,e);function t(){var n;return e.call(this,(n=H())===null||n===void 0?void 0:n.sessionStorage)||this}return t}(wr),Xu=function(e){J(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={done:4},n}return t.prototype.send=function(n,r){return _(this,void 0,void 0,function(){var i=this;return E(this,function(u){return[2,new Promise(function(a,o){typeof XMLHttpRequest>"u"&&o(new Error("XHRTransport is not supported."));var c=new XMLHttpRequest;c.open("POST",n,!0),c.onreadystatechange=function(){if(c.readyState===i.state.done){var s=c.responseText;try{a(i.buildResponse(JSON.parse(s)))}catch{a(i.buildResponse({code:c.status}))}}},c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Accept","*/*"),c.send(JSON.stringify(r))})]})})},t}(ct),Qu=function(e){J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.send=function(n,r){return _(this,void 0,void 0,function(){var i=this;return E(this,function(u){return[2,new Promise(function(a,o){var c=H();if(!(c!=null&&c.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(r),d=c.navigator.sendBeacon(n,JSON.stringify(r));return a(d?i.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(l){o(l)}})]})})},t}(ct),Ju=function(e,t,n){return n===void 0&&(n=!0),_(void 0,void 0,void 0,function(){var r,i,u,a,o,c,s,d,l;return E(this,function(h){switch(h.label){case 0:return r=hu(e),[4,t.getRaw(r)];case 1:return i=h.sent(),i?n?[4,t.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:h.sent(),h.label=3;case 3:return u=R(i.split("."),6),a=u[0],o=u[1],c=u[2],s=u[3],d=u[4],l=u[5],[2,{deviceId:a,userId:Zu(o),sessionId:_t(s),lastEventId:_t(l),lastEventTime:_t(d),optOut:!!c}]}})})},_t=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},Zu=function(e){if(!(!atob||!escape||!e))try{return decodeURIComponent(escape(atob(e)))}catch{return}},ue="[Amplitude]",on="".concat(ue," Form Started"),ea="".concat(ue," Form Submitted"),ta="".concat(ue," File Downloaded"),sn="session_start",cn="session_end",na="".concat(ue," File Extension"),ra="".concat(ue," File Name"),ia="".concat(ue," Link ID"),ua="".concat(ue," Link Text"),aa="".concat(ue," Link URL"),Tt="".concat(ue," Form ID"),wt="".concat(ue," Form Name"),St="".concat(ue," Form Destination"),nt="cookie",oa="US",sa=function(e){J(t,e);function t(n,r,i,u,a,o,c,s,d,l,h,f,v,m,y,p,g,b,T,I,w,A,C,O,U,M,V,W,Z,X,ie,de,Ee,re,K){i===void 0&&(i=new jt),u===void 0&&(u={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),s===void 0&&(s=1e3),d===void 0&&(d=5),l===void 0&&(l=30),h===void 0&&(h=nt),p===void 0&&(p=new cr),g===void 0&&(g=te.Warn),T===void 0&&(T=!1),I===void 0&&(I=!1),C===void 0&&(C=""),O===void 0&&(O=oa),M===void 0&&(M=30*60*1e3),V===void 0&&(V=new Sr({loggerProvider:p})),W===void 0&&(W={ipAddress:!0,language:!0,platform:!0}),Z===void 0&&(Z="fetch"),X===void 0&&(X=!1),ie===void 0&&(ie=!0);var P=e.call(this,{apiKey:n,storageProvider:V,transportProvider:Ir(Z)})||this;return P.apiKey=n,P.appVersion=r,P.cookieOptions=u,P.defaultTracking=a,P.autocapture=o,P.flushIntervalMillis=s,P.flushMaxRetries=d,P.flushQueueSize=l,P.identityStorage=h,P.ingestionMetadata=f,P.instanceName=v,P.loggerProvider=p,P.logLevel=g,P.minIdLength=b,P.offline=T,P.partnerId=w,P.plan=A,P.serverUrl=C,P.serverZone=O,P.sessionTimeout=M,P.storageProvider=V,P.trackingOptions=W,P.transport=Z,P.useBatch=X,P.fetchRemoteConfig=ie,P.networkTrackingOptions=K,P.version=Tr,P._optOut=!1,P._cookieStorage=i,P.deviceId=c,P.lastEventId=m,P.lastEventTime=y,P.optOut=I,P.sessionId=U,P.pageCounter=Ee,P.userId=de,P.debugLogsEnabled=re,P.loggerProvider.enable(re?te.Debug:P.logLevel),P.networkTrackingOptions=K,P}return Object.defineProperty(t.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(n){this._cookieStorage!==n&&(this._cookieStorage=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceId",{get:function(){return this._deviceId},set:function(n){this._deviceId!==n&&(this._deviceId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},set:function(n){this._userId!==n&&(this._userId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},set:function(n){this._sessionId!==n&&(this._sessionId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(n){this._optOut!==n&&(this._optOut=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(n){this._lastEventTime!==n&&(this._lastEventTime=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(n){this._lastEventId!==n&&(this._lastEventId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(n){this._pageCounter!==n&&(this._pageCounter=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugLogsEnabled",{set:function(n){this._debugLogsEnabled!==n&&(this._debugLogsEnabled=n,this.updateStorage())},enumerable:!1,configurable:!0}),t.prototype.updateStorage=function(){var n={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(hr(this.apiKey),n)},t}(Ji),ca=function(e,t,n){return t===void 0&&(t={}),_(void 0,void 0,void 0,function(){var r,i,u,a,o,c,s,d,l,h,f,v,m,y,p,g,b,T,I,w,A,C,O,U,M,V,W,Z,X,ie,de,Ee,re,K,P,lt,ft,ht,vt,pt,gt,mt,yt;return E(this,function(ge){switch(ge.label){case 0:return r=t.identityStorage||nt,I={},r===nt?[3,1]:(u="",[3,5]);case 1:return(A=(w=t.cookieOptions)===null||w===void 0?void 0:w.domain)!==null&&A!==void 0?(a=A,[3,4]):[3,2];case 2:return[4,la()];case 3:a=ge.sent(),ge.label=4;case 4:u=a,ge.label=5;case 5:return i=S.apply(void 0,[(I.domain=u,I.expiration=365,I.sameSite="Lax",I.secure=!1,I.upgrade=!0,I),t.cookieOptions]),o=da(t.identityStorage,i),[4,Ju(e,o,(O=(C=t.cookieOptions)===null||C===void 0?void 0:C.upgrade)!==null&&O!==void 0?O:!0)];case 6:return c=ge.sent(),[4,o.get(hr(e))];case 7:return s=ge.sent(),d=tt(),l=(Z=(W=(V=(M=(U=t.deviceId)!==null&&U!==void 0?U:d.ampDeviceId)!==null&&M!==void 0?M:d.deviceId)!==null&&V!==void 0?V:s==null?void 0:s.deviceId)!==null&&W!==void 0?W:c.deviceId)!==null&&Z!==void 0?Z:be(),h=(X=s==null?void 0:s.lastEventId)!==null&&X!==void 0?X:c.lastEventId,f=(ie=s==null?void 0:s.lastEventTime)!==null&&ie!==void 0?ie:c.lastEventTime,v=(Ee=(de=t.optOut)!==null&&de!==void 0?de:s==null?void 0:s.optOut)!==null&&Ee!==void 0?Ee:c.optOut,m=(re=s==null?void 0:s.sessionId)!==null&&re!==void 0?re:c.sessionId,y=(P=(K=t.userId)!==null&&K!==void 0?K:s==null?void 0:s.userId)!==null&&P!==void 0?P:c.userId,n.previousSessionDeviceId=(lt=s==null?void 0:s.deviceId)!==null&&lt!==void 0?lt:c.deviceId,n.previousSessionUserId=(ft=s==null?void 0:s.userId)!==null&&ft!==void 0?ft:c.userId,p={ipAddress:(vt=(ht=t.trackingOptions)===null||ht===void 0?void 0:ht.ipAddress)!==null&&vt!==void 0?vt:!0,language:(gt=(pt=t.trackingOptions)===null||pt===void 0?void 0:pt.language)!==null&&gt!==void 0?gt:!0,platform:(yt=(mt=t.trackingOptions)===null||mt===void 0?void 0:mt.platform)!==null&&yt!==void 0?yt:!0},g=s==null?void 0:s.pageCounter,b=s==null?void 0:s.debugLogsEnabled,t.autocapture!==void 0&&(t.defaultTracking=t.autocapture),T=new sa(e,t.appVersion,o,i,t.defaultTracking,t.autocapture,l,t.flushIntervalMillis,t.flushMaxRetries,t.flushQueueSize,r,t.ingestionMetadata,t.instanceName,h,f,t.loggerProvider,t.logLevel,t.minIdLength,t.offline,v,t.partnerId,t.plan,t.serverUrl,t.serverZone,m,t.sessionTimeout,t.storageProvider,p,t.transport,t.useBatch,t.fetchRemoteConfig,y,g,b,t.networkTrackingOptions),[4,T.storageProvider.isEnabled()];case 8:return ge.sent()||(T.loggerProvider.warn("Storage provider ".concat(T.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),T.storageProvider=new jt),[2,T]}})})},da=function(e,t){switch(e===void 0&&(e=nt),t===void 0&&(t={}),e){case"localStorage":return new Sr;case"sessionStorage":return new Yu;case"none":return new jt;case"cookie":default:return new xt(S(S({},t),{expirationDays:t.expiration}))}},Ir=function(e){return e==="xhr"?new Xu:e==="beacon"?new Qu:new Eu},la=function(e){return _(void 0,void 0,void 0,function(){var t,n,r,i,u,u,a,o,c,s;return E(this,function(d){switch(d.label){case 0:return[4,new xt().isEnabled()];case 1:if(!d.sent()||typeof location>"u"||!location.hostname)return[2,""];for(t=location.hostname,n=t.split("."),r=[],i="AMP_TLDTEST",u=n.length-2;u>=0;--u)r.push(n.slice(u).join("."));u=0,d.label=2;case 2:return u<r.length?(a=r[u],o={domain:"."+a},c=new xt(o),[4,c.set(i,1)]):[3,7];case 3:return d.sent(),[4,c.get(i)];case 4:return s=d.sent(),s?[4,c.remove(i)]:[3,6];case 5:return d.sent(),[2,"."+a];case 6:return u++,[3,2];case 7:return[2,""]}})})},Ar=function(){var e="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[e]<"u")return globalThis[e];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},dn=function(){var e,t=Ar();if(!(!((e=t==null?void 0:t.location)===null||e===void 0)&&e.search))return{};var n=t.location.search.substring(1).split("&").filter(Boolean),r=n.reduce(function(i,u){var a=u.split("=",2),o=ln(a[0]),c=ln(a[1]);return c&&(i[o]=c),i},{});return r},ln=function(e){e===void 0&&(e="");try{return decodeURIComponent(e)}catch{return""}},fa="utm_campaign",ha="utm_content",va="utm_id",pa="utm_medium",ga="utm_source",ma="utm_term",fn="dclid",hn="fbclid",vn="gbraid",pn="gclid",gn="ko_click_id",mn="li_fat_id",yn="msclkid",bn="rtd_cid",En="ttclid",_n="twclid",Tn="wbraid",kr={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},ya=function(){function e(){}return e.prototype.parse=function(){return _(this,void 0,void 0,function(){return E(this,function(t){return[2,S(S(S(S({},kr),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},e.prototype.getUtmParam=function(){var t=dn(),n=t[fa],r=t[ha],i=t[va],u=t[pa],a=t[ga],o=t[ma];return{utm_campaign:n,utm_content:r,utm_id:i,utm_medium:u,utm_source:a,utm_term:o}},e.prototype.getReferrer=function(){var t,n,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(n=(t=r.referrer)===null||t===void 0?void 0:t.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return r},e.prototype.getClickIds=function(){var t,n=dn();return t={},t[fn]=n[fn],t[hn]=n[hn],t[vn]=n[vn],t[pn]=n[pn],t[gn]=n[gn],t[mn]=n[mn],t[yn]=n[yn],t[bn]=n[bn],t[En]=n[En],t[_n]=n[_n],t[Tn]=n[Tn],t},e}(),rt;(function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"})(rt||(rt={}));var wn;(function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE_CURRENCY="$currency",e.REVENUE="$revenue"})(wn||(wn={}));var Sn;(function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"})(Sn||(Sn={}));var it;(function(e){e.US="US",e.EU="EU"})(it||(it={}));var ut;(function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"})(ut||(ut={}));var ba=function(e){var t={};for(var n in e){var r=e[n];r&&(t[n]=r)}return t},Ea="[Amplitude] Page Viewed",_a=function(e){e===void 0&&(e={});var t,n=Ar(),r=void 0,i=!1,u,a=e.trackOn,o=e.trackHistoryChanges,c=e.eventType,s=c===void 0?Ea:c,d=function(p){var g=p;try{g=decodeURI(p)}catch(b){r==null||r.error("Malformed URI sequence: ",b)}return g},l=function(){return _(void 0,void 0,void 0,function(){var p,g,b;return E(this,function(T){switch(T.label){case 0:return p=d(typeof location<"u"&&location.href||""),b={event_type:s},g=[{}],[4,Ta()];case 1:return[2,(b.event_properties=S.apply(void 0,[S.apply(void 0,g.concat([T.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":p,"[Amplitude] Page Path":typeof location<"u"&&d(location.pathname)||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":p.split("?")[0]}]),b)]}})})},h=function(){return typeof a>"u"||typeof a=="function"&&a()},f=typeof location<"u"?location.href:null,v=function(){return _(void 0,void 0,void 0,function(){var p,g,b,T;return E(this,function(I){switch(I.label){case 0:return p=location.href,g=Sa(o,p,f||"")&&h(),f=p,g?(r==null||r.log("Tracking page view event"),t!=null?[3,1]:[3,3]):[3,4];case 1:return T=(b=t).track,[4,l()];case 2:T.apply(b,[I.sent()]),I.label=3;case 3:I.label=4;case 4:return[2]}})})},m=function(){v()},y={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(p,g){return _(void 0,void 0,void 0,function(){var b,T;return E(this,function(I){switch(I.label){case 0:return t=g,u=p,r=p.loggerProvider,r.log("Installing @amplitude/plugin-page-view-tracking-browser"),i=!0,n&&(n.addEventListener("popstate",m),n.history.pushState=new Proxy(n.history.pushState,{apply:function(w,A,C){var O=R(C,3),U=O[0],M=O[1],V=O[2];w.apply(A,[U,M,V]),i&&v()}})),h()?(r.log("Tracking page view event"),T=(b=t).track,[4,l()]):[3,2];case 1:T.apply(b,[I.sent()]),I.label=2;case 2:return[2]}})})},execute:function(p){return _(void 0,void 0,void 0,function(){var g;return E(this,function(b){switch(b.label){case 0:return a==="attribution"&&wa(p)?(r==null||r.log("Enriching campaign event to page view event with campaign parameters"),[4,l()]):[3,2];case 1:g=b.sent(),p.event_type=g.event_type,p.event_properties=S(S({},p.event_properties),g.event_properties),b.label=2;case 2:return u&&p.event_type===s&&(u.pageCounter=u.pageCounter?u.pageCounter+1:1,p.event_properties=S(S({},p.event_properties),{"[Amplitude] Page Counter":u.pageCounter})),[2,p]}})})},teardown:function(){return _(void 0,void 0,void 0,function(){return E(this,function(p){return n&&(n.removeEventListener("popstate",m),i=!1),[2]})})}};return y},Ta=function(){return _(void 0,void 0,void 0,function(){var e;return E(this,function(t){switch(t.label){case 0:return e=ba,[4,new ya().parse()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},wa=function(e){if(e.event_type==="$identify"&&e.user_properties){var t=e.user_properties,n=t[rt.SET]||{},r=t[rt.UNSET]||{},i=L(L([],R(Object.keys(n)),!1),R(Object.keys(r)),!1);return Object.keys(kr).every(function(u){return i.includes(u)})}return!1},Sa=function(e,t,n){switch(e){case"pathOnly":{if(n=="")return!0;var r=new URL(t),i=new URL(n),u=r.origin+r.pathname,a=i.origin+i.pathname;return u!==a}default:return t!==n}},Ia=function(){var e,t=[],n=function(s,d,l){s.addEventListener(d,l),t.push({element:s,type:d,handler:l})},r=function(){t.forEach(function(s){var d=s.element,l=s.type,h=s.handler;d==null||d.removeEventListener(l,h)}),t=[]},i="@amplitude/plugin-form-interaction-tracking-browser",u="enrichment",a=function(s,d){return _(void 0,void 0,void 0,function(){var l,h;return E(this,function(f){return l=function(){if(!d){s.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var v=function(y){var p=!1;n(y,"change",function(){var g,b=In(y);p||d.track(on,(g={},g[Tt]=_e(y.id),g[wt]=_e(y.name),g[St]=b,g)),p=!0}),n(y,"submit",function(){var g,b,T=In(y);p||d.track(on,(g={},g[Tt]=_e(y.id),g[wt]=_e(y.name),g[St]=T,g)),d.track(ea,(b={},b[Tt]=_e(y.id),b[wt]=_e(y.name),b[St]=T,b)),p=!1})},m=Array.from(document.getElementsByTagName("form"));m.forEach(v),typeof MutationObserver<"u"&&(e=new MutationObserver(function(y){y.forEach(function(p){p.addedNodes.forEach(function(g){g.nodeName==="FORM"&&v(g),"querySelectorAll"in g&&typeof g.querySelectorAll=="function"&&Array.from(g.querySelectorAll("form")).map(v)})})}),e.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?l():(h=H(),h?h.addEventListener("load",l):s.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},o=function(s){return _(void 0,void 0,void 0,function(){return E(this,function(d){return[2,s]})})},c=function(){return _(void 0,void 0,void 0,function(){return E(this,function(s){return e==null||e.disconnect(),r(),[2]})})};return{name:i,type:u,setup:a,execute:o,teardown:c}},_e=function(e){if(typeof e=="string")return e},In=function(e){var t=e.getAttribute("action");try{t=new URL(encodeURI(t??""),window.location.href).href}catch{}return t},Aa=function(){var e,t=[],n=function(s,d,l){s.addEventListener(d,l),t.push({element:s,type:d,handler:l})},r=function(){t.forEach(function(s){var d=s.element,l=s.type,h=s.handler;d==null||d.removeEventListener(l,h)}),t=[]},i="@amplitude/plugin-file-download-tracking-browser",u="enrichment",a=function(s,d){return _(void 0,void 0,void 0,function(){var l,h;return E(this,function(f){return l=function(){if(!d){s.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var v=function(p){var g;try{g=new URL(p.href,window.location.href)}catch{return}var b=m.exec(g.href),T=b==null?void 0:b[1];T&&n(p,"click",function(){var I;T&&d.track(ta,(I={},I[na]=T,I[ra]=g.pathname,I[ia]=p.id,I[ua]=p.text,I[aa]=p.href,I))})},m=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,y=Array.from(document.getElementsByTagName("a"));y.forEach(v),typeof MutationObserver<"u"&&(e=new MutationObserver(function(p){p.forEach(function(g){g.addedNodes.forEach(function(b){b.nodeName==="A"&&v(b),"querySelectorAll"in b&&typeof b.querySelectorAll=="function"&&Array.from(b.querySelectorAll("a")).map(v)})})}),e.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?l():(h=H(),h?h.addEventListener("load",l):s.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},o=function(s){return _(void 0,void 0,void 0,function(){return E(this,function(d){return[2,s]})})},c=function(){return _(void 0,void 0,void 0,function(){return E(this,function(s){return e==null||e.disconnect(),r(),[2]})})};return{name:i,type:u,setup:a,execute:o,teardown:c}},An=!1,ka=function(e){if(!(An||e.defaultTracking!==void 0)){var t=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;e.loggerProvider.warn(t),An=!0}},Pa=function(){var e="@amplitude/plugin-network-checker-browser",t="before",n=H(),r=[],i=function(c,s){n!=null&&n.addEventListener&&(n==null||n.addEventListener(c,s),r.push({type:c,handler:s}))},u=function(){r.forEach(function(c){var s=c.type,d=c.handler;n==null||n.removeEventListener(s,d)}),r=[]},a=function(c,s){return _(void 0,void 0,void 0,function(){return E(this,function(d){return typeof navigator>"u"?(c.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),c.offline=!1,[2]):(c.offline=!navigator.onLine,i("online",function(){c.loggerProvider.debug("Network connectivity changed to online."),c.offline=!1,setTimeout(function(){s.flush()},c.flushIntervalMillis)}),i("offline",function(){c.loggerProvider.debug("Network connectivity changed to offline."),c.offline=!0}),[2])})})},o=function(){return _(void 0,void 0,void 0,function(){return E(this,function(c){return u(),[2]})})};return{name:e,type:t,setup:a,teardown:o}},Ca="Network error occurred, remote config fetch failed",Ra="Remote config successfully fetched",Oa="Remote config fetch rejected due to exceeded retry count",kn="Remote config fetch rejected due to timeout after 5 seconds",Pn="Unexpected error occurred",xa="https://sr-client-cfg.amplitude.com/config",La="https://sr-client-cfg.stag2.amplitude.com/config",Na="https://sr-client-cfg.eu.amplitude.com/config",Da=function(){function e(t){var n=t.localConfig,r=t.configKeys,i=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(u,a,o){return _(i,void 0,void 0,function(){var c,s,d;return E(this,function(l){switch(l.label){case 0:return c=Date.now(),[4,this.fetchWithTimeout(o)];case 1:return s=l.sent(),s&&(d=s.configs&&s.configs[u],d)?(this.metrics.fetchTimeAPISuccess=Date.now()-c,[2,d[a]]):(this.metrics.fetchTimeAPIFail=Date.now()-c,[2,void 0])}})})},this.fetchWithTimeout=function(u){return _(i,void 0,void 0,function(){var a,o,c;return E(this,function(s){switch(s.label){case 0:return a=new AbortController,o=setTimeout(function(){return a.abort()},5e3),[4,this.fetchRemoteConfig(a.signal,u)];case 1:return c=s.sent(),clearTimeout(o),[2,c]}})})},this.fetchRemoteConfig=function(u,a){return _(i,void 0,void 0,function(){var o,c,s,d,l,h,f,v,m,y,p,g,b;return E(this,function(T){switch(T.label){case 0:if(a===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:Oa})];if(u.aborted)return[2,this.completeRequest({err:kn})];a!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=a,this.attempts=0),T.label=1;case 1:T.trys.push([1,3,,4]),o=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(c=x(this.configKeys),s=c.next();!s.done;s=c.next())d=s.value,o.append("config_keys",d)}catch(I){p={error:I}}finally{try{s&&!s.done&&(g=c.return)&&g.call(c)}finally{if(p)throw p.error}}return a&&o.set("session_id",String(a)),l={headers:{Accept:"*/*"},method:"GET"},h="".concat(this.getServerUrl(),"?").concat(o.toString()),this.attempts+=1,[4,fetch(h,S(S({},l),{signal:u}))];case 2:if(f=T.sent(),f===null)return[2,this.completeRequest({err:Pn})];switch(v=new ct().buildStatus(f.status),v){case ut.Success:return this.attempts=0,[2,this.parseAndStoreConfig(f)];case ut.Failed:return[2,this.retryFetch(u,a)];default:return[2,this.completeRequest({err:Ca})]}case 3:return m=T.sent(),y=m,u.aborted?[2,this.completeRequest({err:kn})]:[2,this.completeRequest({err:(b=y.message)!==null&&b!==void 0?b:Pn})];case 4:return[2]}})})},this.retryFetch=function(u,a){return _(i,void 0,void 0,function(){var o=this;return E(this,function(c){switch(c.label){case 0:return[4,new Promise(function(s){return setTimeout(s,o.attempts*o.retryTimeout)})];case 1:return c.sent(),[2,this.fetchRemoteConfig(u,a)]}})})},this.parseAndStoreConfig=function(u){return _(i,void 0,void 0,function(){var a;return E(this,function(o){switch(o.label){case 0:return[4,u.json()];case 1:return a=o.sent(),this.completeRequest({success:Ra}),[2,a]}})})},this.localConfig=n,this.configKeys=r}return e.prototype.getServerUrl=function(){return this.localConfig.serverZone===it.STAGING?La:this.localConfig.serverZone===it.EU?Na:xa},e.prototype.completeRequest=function(t){var n=t.err,r=t.success;if(n)throw new Error(n);r&&this.localConfig.loggerProvider.log(r)},e}(),Ma=function(e){var t=e.localConfig,n=e.configKeys;return _(void 0,void 0,void 0,function(){return E(this,function(r){return[2,new Da({localConfig:t,configKeys:n})]})})},Ua=Ma,ja=function(){function e(t){this.config=t,this.config.loggerProvider.debug("Local configuration before merging with remote config",JSON.stringify(this.config,null,2))}return e.prototype.initialize=function(){return _(this,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:return t=this,[4,Ua({localConfig:this.config,configKeys:["analyticsSDK"]})];case 1:return t.remoteConfigFetch=n.sent(),[2]}})})},e.prototype.generateJoinedConfig=function(){var t,n,r,i,u,a;return _(this,void 0,void 0,function(){var o,c,s,d,l,h,f,v,m,y,p,g,b;return E(this,function(T){switch(T.label){case 0:return T.trys.push([0,3,,4]),c=this.remoteConfigFetch,c?[4,this.remoteConfigFetch.getRemoteConfig("analyticsSDK","browserSDK",this.config.sessionId)]:[3,2];case 1:c=T.sent(),T.label=2;case 2:if(o=c,this.config.loggerProvider.debug("Remote configuration:",JSON.stringify(o,null,2)),o&&"autocapture"in o){if(typeof o.autocapture=="boolean"&&(this.config.autocapture=o.autocapture),typeof o.autocapture=="object"){if(s=S({},o.autocapture),this.config.autocapture===void 0&&(this.config.autocapture=o.autocapture),typeof o.autocapture.elementInteractions=="object"&&(!((t=o.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||t===void 0)&&t.length)){s.elementInteractions=S({},o.autocapture.elementInteractions),d=s.elementInteractions,l=(n=d.pageUrlAllowlist)!==null&&n!==void 0?n:[],h=[];try{for(f=x(o.autocapture.elementInteractions.pageUrlAllowlistRegex),v=f.next();!v.done;v=f.next()){m=v.value;try{h.push(new RegExp(m))}catch(I){this.config.loggerProvider.warn("Invalid regex pattern: ".concat(m),I)}}}catch(I){g={error:I}}finally{try{v&&!v.done&&(b=f.return)&&b.call(f)}finally{if(g)throw g.error}}y=l.concat(h),d.pageUrlAllowlist=y,delete d.pageUrlAllowlistRegex}typeof this.config.autocapture=="boolean"&&(this.config.autocapture=S({attribution:this.config.autocapture,fileDownloads:this.config.autocapture,formInteractions:this.config.autocapture,pageViews:this.config.autocapture,sessions:this.config.autocapture,elementInteractions:this.config.autocapture,webVitals:this.config.autocapture,frustrationInteractions:this.config.autocapture},s)),typeof this.config.autocapture=="object"&&(this.config.autocapture=S(S({},this.config.autocapture),s))}this.config.defaultTracking=this.config.autocapture}return this.config.loggerProvider.debug("Joined configuration: ",JSON.stringify(this.config,null,2)),(r=(a=this.config).requestMetadata)!==null&&r!==void 0||(a.requestMetadata=new lr),!((i=this.remoteConfigFetch)===null||i===void 0)&&i.metrics.fetchTimeAPISuccess&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_success",this.remoteConfigFetch.metrics.fetchTimeAPISuccess),!((u=this.remoteConfigFetch)===null||u===void 0)&&u.metrics.fetchTimeAPIFail&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_fail",this.remoteConfigFetch.metrics.fetchTimeAPIFail),[3,4];case 3:return p=T.sent(),this.config.loggerProvider.error("Failed to fetch remote configuration because of error: ",p),[3,4];case 4:return[2,this.config]}})})},e}(),Fa=function(e){return _(void 0,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:return t=new ja(e),[4,t.initialize()];case 1:return n.sent(),[2,t]}})})},qa="@amplitude/plugin-autocapture-browser",Va="@amplitude/plugin-frustration-browser",Lt="[Amplitude] Element Clicked",$a="[Amplitude] Dead Click",Ba="[Amplitude] Rage Click",Ga="[Amplitude] Element Changed",Ha="[Amplitude] Element ID",Wa="[Amplitude] Element Class",Pr="[Amplitude] Element Tag",Cr="[Amplitude] Element Text",Ka="[Amplitude] Element Hierarchy",za="[Amplitude] Element Href",Ya="[Amplitude] Element Position Left",Xa="[Amplitude] Element Position Top",Qa="[Amplitude] Element Aria Label",Ja="[Amplitude] Element Attributes",Za="[Amplitude] Element Parent Label",Rr="[Amplitude] Page URL",eo="[Amplitude] Page Title",to="[Amplitude] Viewport Height",no="[Amplitude] Viewport Width",Xe="https://app.amplitude.com",ro="https://app.eu.amplitude.com",io="https://apps.stag2.amplitude.com",uo={US:Xe,EU:ro,STAGING:io},ao="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",oo="amp-visual-tagging-selector-highlight";function D(e){return typeof e=="function"}function Ft(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var It=Ft(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function at(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Me=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,u;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=x(a),c=o.next();!c.done;c=o.next()){var s=c.value;s.remove(this)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if(D(d))try{d()}catch(m){u=m instanceof It?m.errors:[m]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var h=x(l),f=h.next();!f.done;f=h.next()){var v=f.value;try{Cn(v)}catch(m){u=u??[],m instanceof It?u=L(L([],R(u)),R(m.errors)):u.push(m)}}}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(u)throw new It(u)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Cn(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&at(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&at(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Or=Me.EMPTY;function xr(e){return e instanceof Me||e&&"closed"in e&&D(e.remove)&&D(e.add)&&D(e.unsubscribe)}function Cn(e){D(e)?e():e.unsubscribe()}var so={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lr={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,L([e,t],R(n)))},clearTimeout:function(e){var t=Lr.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Nr(e){Lr.setTimeout(function(){throw e})}function Nt(){}function Qe(e){e()}var qt=function(e){J(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,xr(n)&&n.add(r)):r.destination=fo,r}return t.create=function(n,r,i){return new Le(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Me),co=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){He(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){He(r)}else He(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){He(n)}},e}(),Le=function(e){J(t,e);function t(n,r,i){var u=e.call(this)||this,a;return D(n)||!n?a={next:n??void 0,error:r??void 0,complete:i??void 0}:a=n,u.destination=new co(a),u}return t}(qt);function He(e){Nr(e)}function lo(e){throw e}var fo={closed:!0,next:Nt,error:lo,complete:Nt},Vt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Dr(e){return e}function ho(e){return e.length===0?Dr:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var B=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,u=po(t)?t:new Le(t,n,r);return Qe(function(){var a=i,o=a.operator,c=a.source;u.add(o?o.call(u,c):c?i._subscribe(u):i._trySubscribe(u))}),u},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Rn(n),new n(function(i,u){var a=new Le({next:function(o){try{t(o)}catch(c){u(c),a.unsubscribe()}},error:u,complete:i});r.subscribe(a)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Vt]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ho(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Rn(t),new t(function(r,i){var u;n.subscribe(function(a){return u=a},function(a){return i(a)},function(){return r(u)})})},e.create=function(t){return new e(t)},e}();function Rn(e){var t;return(t=e??so.Promise)!==null&&t!==void 0?t:Promise}function vo(e){return e&&D(e.next)&&D(e.error)&&D(e.complete)}function po(e){return e&&e instanceof qt||vo(e)&&xr(e)}function go(e){return D(e==null?void 0:e.lift)}function ne(e){return function(t){if(go(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(e,t,n,r,i){return new mo(e,t,n,r,i)}var mo=function(e){J(t,e);function t(n,r,i,u,a,o){var c=e.call(this,n)||this;return c.onFinalize=a,c.shouldUnsubscribe=o,c._next=r?function(s){try{r(s)}catch(d){n.error(d)}}:e.prototype._next,c._error=u?function(s){try{u(s)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(s){n.error(s)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(qt),yo=Ft(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Mr=function(e){J(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new On(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new yo},t.prototype.next=function(n){var r=this;Qe(function(){var i,u;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=x(r.currentObservers),o=a.next();!o.done;o=a.next()){var c=o.value;c.next(n)}}catch(s){i={error:s}}finally{try{o&&!o.done&&(u=a.return)&&u.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Qe(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Qe(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,u=i.hasError,a=i.isStopped,o=i.observers;return u||a?Or:(this.currentObservers=null,o.push(n),new Me(function(){r.currentObservers=null,at(o,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,u=r.thrownError,a=r.isStopped;i?n.error(u):a&&n.complete()},t.prototype.asObservable=function(){var n=new B;return n.source=this,n},t.create=function(n,r){return new On(n,r)},t}(B),On=function(e){J(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Or},t}(Mr),bo={now:function(){return Date.now()},delegate:void 0},Eo=function(e){J(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(Me),xn={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,L([e,t],R(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},_o=function(e){J(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var u=this.id,a=this.scheduler;return u!=null&&(this.id=this.recycleAsyncId(a,u,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),xn.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&xn.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,u;try{this.work(n)}catch(a){i=!0,u=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),u},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,u=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,at(u,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Eo),Ln=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=bo.now,e}(),To=function(e){J(t,e);function t(n,r){r===void 0&&(r=Ln.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Ln),Ue=new To(_o),wo=Ue,$t=new B(function(e){return e.complete()});function Ur(e){return e&&D(e.schedule)}function jr(e){return e[e.length-1]}function So(e){return Ur(jr(e))?e.pop():void 0}function Io(e,t){return typeof jr(e)=="number"?e.pop():t}var Bt=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Fr(e){return D(e==null?void 0:e.then)}function qr(e){return D(e[Vt])}function Vr(e){return Symbol.asyncIterator&&D(e==null?void 0:e[Symbol.asyncIterator])}function $r(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ao(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Br=Ao();function Gr(e){return D(e==null?void 0:e[Br])}function Hr(e){return Pi(this,arguments,function(){var n,r,i,u;return E(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Se(n.read())];case 3:return r=a.sent(),i=r.value,u=r.done,u?[4,Se(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Se(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Wr(e){return D(e==null?void 0:e.getReader)}function Y(e){if(e instanceof B)return e;if(e!=null){if(qr(e))return ko(e);if(Bt(e))return Po(e);if(Fr(e))return Co(e);if(Vr(e))return Kr(e);if(Gr(e))return Ro(e);if(Wr(e))return Oo(e)}throw $r(e)}function ko(e){return new B(function(t){var n=e[Vt]();if(D(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Po(e){return new B(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Co(e){return new B(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Nr)})}function Ro(e){return new B(function(t){var n,r;try{for(var i=x(e),u=i.next();!u.done;u=i.next()){var a=u.value;if(t.next(a),t.closed)return}}catch(o){n={error:o}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Kr(e){return new B(function(t){xo(e,t).catch(function(n){return t.error(n)})})}function Oo(e){return Kr(Hr(e))}function xo(e,t){var n,r,i,u;return _(this,void 0,void 0,function(){var a,o;return E(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Ci(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=c.sent(),i={error:o},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(u=n.return)?[4,u.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ve(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var u=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(u),!i)return u}function zr(e,t){return t===void 0&&(t=0),ne(function(n,r){n.subscribe(z(r,function(i){return ve(r,e,function(){return r.next(i)},t)},function(){return ve(r,e,function(){return r.complete()},t)},function(i){return ve(r,e,function(){return r.error(i)},t)}))})}function Yr(e,t){return t===void 0&&(t=0),ne(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Lo(e,t){return Y(e).pipe(Yr(t),zr(t))}function No(e,t){return Y(e).pipe(Yr(t),zr(t))}function Do(e,t){return new B(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Mo(e,t){return new B(function(n){var r;return ve(n,t,function(){r=e[Br](),ve(n,t,function(){var i,u,a;try{i=r.next(),u=i.value,a=i.done}catch(o){n.error(o);return}a?n.complete():n.next(u)},0,!0)}),function(){return D(r==null?void 0:r.return)&&r.return()}})}function Xr(e,t){if(!e)throw new Error("Iterable cannot be null");return new B(function(n){ve(n,t,function(){var r=e[Symbol.asyncIterator]();ve(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function Uo(e,t){return Xr(Hr(e),t)}function jo(e,t){if(e!=null){if(qr(e))return Lo(e,t);if(Bt(e))return Do(e,t);if(Fr(e))return No(e,t);if(Vr(e))return Xr(e,t);if(Gr(e))return Mo(e,t);if(Wr(e))return Uo(e,t)}throw $r(e)}function Fo(e,t){return t?jo(e,t):Y(e)}function Qr(e){return e instanceof Date&&!isNaN(e)}var qo=Ft(function(e){return function(n){n===void 0&&(n=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}});function Vo(e,t){var n=Qr(e)?{first:e}:typeof e=="number"?{each:e}:e,r=n.first,i=n.each,u=n.with,a=u===void 0?$o:u,o=n.scheduler,c=o===void 0?Ue:o,s=n.meta,d=s===void 0?null:s;if(r==null&&i==null)throw new TypeError("No timeout provided.");return ne(function(l,h){var f,v,m=null,y=0,p=function(g){v=ve(h,c,function(){try{f.unsubscribe(),Y(a({meta:d,lastValue:m,seen:y})).subscribe(h)}catch(b){h.error(b)}},g)};f=l.subscribe(z(h,function(g){v==null||v.unsubscribe(),y++,h.next(m=g),i>0&&p(i)},void 0,void 0,function(){v!=null&&v.closed||v==null||v.unsubscribe(),m=null})),!y&&p(r!=null?typeof r=="number"?r:+r-c.now():i)})}function $o(e){throw new qo(e)}function G(e,t){return ne(function(n,r){var i=0;n.subscribe(z(r,function(u){r.next(e.call(t,u,i++))}))})}var Bo=Array.isArray;function Go(e,t){return Bo(t)?e.apply(void 0,L([],R(t))):e(t)}function Ho(e){return G(function(t){return Go(e,t)})}function Wo(e,t,n,r,i,u,a,o){var c=[],s=0,d=0,l=!1,h=function(){l&&!c.length&&!s&&t.complete()},f=function(m){return s<r?v(m):c.push(m)},v=function(m){s++;var y=!1;Y(n(m,d++)).subscribe(z(t,function(p){t.next(p)},function(){y=!0},void 0,function(){if(y)try{s--;for(var p=function(){var g=c.shift();a||v(g)};c.length&&s<r;)p();h()}catch(g){t.error(g)}}))};return e.subscribe(z(t,f,function(){l=!0,h()})),function(){}}function je(e,t,n){return n===void 0&&(n=1/0),D(t)?je(function(r,i){return G(function(u,a){return t(r,u,i,a)})(Y(e(r,i)))},n):(typeof t=="number"&&(n=t),ne(function(r,i){return Wo(r,i,e,n)}))}function Ko(e){return e===void 0&&(e=1/0),je(Dr,e)}var zo=["addListener","removeListener"],Yo=["addEventListener","removeEventListener"],Xo=["on","off"];function Ae(e,t,n,r){if(D(n)&&(r=n,n=void 0),r)return Ae(e,t,n).pipe(Ho(r));var i=R(Zo(e)?Yo.map(function(o){return function(c){return e[o](t,c,n)}}):Qo(e)?zo.map(Nn(e,t)):Jo(e)?Xo.map(Nn(e,t)):[],2),u=i[0],a=i[1];if(!u&&Bt(e))return je(function(o){return Ae(o,t,n)})(Y(e));if(!u)throw new TypeError("Invalid event target");return new B(function(o){var c=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];return o.next(1<s.length?s:s[0])};return u(c),function(){return a(c)}})}function Nn(e,t){return function(n){return function(r){return e[n](t,r)}}}function Qo(e){return D(e.addListener)&&D(e.removeListener)}function Jo(e){return D(e.on)&&D(e.off)}function Zo(e){return D(e.addEventListener)&&D(e.removeEventListener)}function Jr(e,t,n){e===void 0&&(e=0),n===void 0&&(n=wo);var r=-1;return t!=null&&(Ur(t)?n=t:r=t),new B(function(i){var u=Qr(e)?+e-n.now():e;u<0&&(u=0);var a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},u)})}function Gt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=So(e),r=Io(e,1/0),i=e;return i.length?i.length===1?Y(i[0]):Ko(r)(Fo(i,n)):$t}var es=Array.isArray;function ts(e){return e.length===1&&es(e[0])?e[0]:e}function Q(e,t){return ne(function(n,r){var i=0;n.subscribe(z(r,function(u){return e.call(t,u,i++)&&r.next(u)}))})}function ns(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=ts(e),e.length===1?Y(e[0]):new B(rs(e))}function rs(e){return function(t){for(var n=[],r=function(u){n.push(Y(e[u]).subscribe(z(t,function(a){if(n){for(var o=0;o<n.length;o++)o!==u&&n[o].unsubscribe();n=null}t.next(a)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}function is(e){return ne(function(t,n){var r=[];return t.subscribe(z(n,function(i){return r.push(i)},function(){n.next(r),n.complete()})),Y(e).subscribe(z(n,function(){var i=r;r=[],n.next(i)},Nt)),function(){r=null}})}function us(e,t){return t===void 0&&(t=Ue),ne(function(n,r){var i=null,u=null,a=null,o=function(){if(i){i.unsubscribe(),i=null;var s=u;u=null,r.next(s)}};function c(){var s=a+e,d=t.now();if(d<s){i=this.schedule(void 0,s-d),r.add(i);return}o()}n.subscribe(z(r,function(s){u=s,a=t.now(),i||(i=t.schedule(c,e),r.add(i))},function(){o(),r.complete()},void 0,function(){u=i=null}))})}function Ht(e){return e<=0?function(){return $t}:ne(function(t,n){var r=0;t.subscribe(z(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function as(e){return G(function(){return e})}function os(e,t){return je(function(n,r){return Y(e(n,r)).pipe(Ht(1),as(n))})}function ss(e,t){t===void 0&&(t=Ue);var n=Jr(e,t);return os(function(){return n})}function cs(){return ne(function(e,t){var n,r=!1;e.subscribe(z(t,function(i){var u=n;n=i,r&&t.next([u,i]),r=!0}))})}function me(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new Mr}:t,r=e.resetOnError,i=r===void 0?!0:r,u=e.resetOnComplete,a=u===void 0?!0:u,o=e.resetOnRefCountZero,c=o===void 0?!0:o;return function(s){var d,l,h,f=0,v=!1,m=!1,y=function(){l==null||l.unsubscribe(),l=void 0},p=function(){y(),d=h=void 0,v=m=!1},g=function(){var b=d;p(),b==null||b.unsubscribe()};return ne(function(b,T){f++,!m&&!v&&y();var I=h=h??n();T.add(function(){f--,f===0&&!m&&!v&&(l=At(g,c))}),I.subscribe(T),!d&&f>0&&(d=new Le({next:function(w){return I.next(w)},error:function(w){m=!0,y(),l=At(p,i,w),I.error(w)},complete:function(){v=!0,y(),l=At(p,a),I.complete()}}),Y(b).subscribe(d))})(s)}}function At(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Le({next:function(){i.unsubscribe(),e()}});return Y(t.apply(void 0,L([],R(n)))).subscribe(i)}}function ds(e,t){return ne(function(n,r){var i=null,u=0,a=!1,o=function(){return a&&!i&&r.complete()};n.subscribe(z(r,function(c){i==null||i.unsubscribe();var s=0,d=u++;Y(e(c,d)).subscribe(i=z(r,function(l){return r.next(t?t(c,l,d,s++):l)},function(){i=null,o()}))},function(){a=!0,o()}))})}function ls(e,t){return ne(function(n,r){var i=t??{},u=i.leading,a=u===void 0?!0:u,o=i.trailing,c=o===void 0?!1:o,s=!1,d=null,l=null,h=!1,f=function(){l==null||l.unsubscribe(),l=null,c&&(y(),h&&r.complete())},v=function(){l=null,h&&r.complete()},m=function(p){return l=Y(e(p)).subscribe(z(r,f,v))},y=function(){if(s){s=!1;var p=d;d=null,r.next(p),!h&&m(p)}};n.subscribe(z(r,function(p){s=!0,d=p,!(l&&!l.closed)&&(a?y():m(p))},function(){h=!0,!(c&&s&&l&&!l.closed)&&r.complete()}))})}function fs(e,t,n){t===void 0&&(t=Ue);var r=Jr(e,t);return ls(function(){return r},n)}var hs=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],vs=["type"],ps=["svg","path","g"],gs=["password","hidden"],ms=128,ys=1024;function bs(e){var t,n,r,i,u,a;if(e===null)return null;var o=String(e.tagName).toLowerCase(),c={tag:o},s=Array.from((i=(r=e.parentElement)===null||r===void 0?void 0:r.children)!==null&&i!==void 0?i:[]);s.length&&(c.index=s.indexOf(e),c.indexOfType=s.filter(function(T){return T.tagName===e.tagName}).indexOf(e));var d=(a=(u=e.previousElementSibling)===null||u===void 0?void 0:u.tagName)===null||a===void 0?void 0:a.toLowerCase();d&&(c.prevSib=String(d));var l=e.getAttribute("id");l&&(c.id=String(l));var h=Array.from(e.classList);h.length&&(c.classes=h);var f={},v=Array.from(e.attributes),m=v.filter(function(T){return!hs.includes(T.name)}),y=!ti(e);if(!gs.includes(String(e.getAttribute("type")))&&!ps.includes(o))try{for(var p=x(m),g=p.next();!g.done;g=p.next()){var b=g.value;y&&!vs.includes(b.name)||(f[b.name]=String(b.value).substring(0,ms))}}catch(T){t={error:T}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return Object.keys(f).length&&(c.attrs=f),c}function Es(e){var t=[];if(!e)return t;t.push(e);for(var n=e.parentElement;n&&n.tagName!=="HTML";)t.push(n),n=n.parentElement;return t}var _s=function(e){var t=[];if(!e)return[];var n=Es(e);return t=Ts(n.map(function(r){return bs(r)}),ys),t};function Ts(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(i===null)n+=4;else{var u=Je(i);n+=u?Array.from(u).length:4}if(n>t)return e.slice(0,r)}return e}function Je(e,t){t===void 0&&(t=!1);try{if(e==null)return t?"None":null;if(typeof e=="string")return t?(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r"),e.includes('"')?"'".concat(e,"'"):e.includes("'")?'"'.concat(e.replace(/'/g,"\\'"),'"'):"'".concat(e,"'")):e;if(typeof e=="boolean")return e?"True":"False";if(Array.isArray(e)){var n=e.map(function(u){return Je(u,!0)});return"[".concat(n.join(", "),"]")}else if(typeof e=="object"){var r=Object.entries(e).filter(function(u){var a=R(u,1),o=a[0];return o!=null}).map(function(u){var a=R(u,2),o=a[0],c=a[1];return"".concat(String(Je(o,!0)),": ").concat(String(Je(c,!0)))}),i="{".concat(r.join(", "),"}");return i.includes("\\'")&&(i=i.replace(/'/g,"'").replace(/'/g,"\\'")),i}return e.toString()}catch{return null}}var ws=["input","select","textarea"],Zr=function(e,t){var n,r=(n=window==null?void 0:window.getComputedStyle)===null||n===void 0?void 0:n.call(window,e);return(r==null?void 0:r.getPropertyValue("cursor"))==="pointer"&&t==="click"},Oe=function(e,t,n){return n===void 0&&(n=!1),function(r,i){var u,a,o=e.pageUrlAllowlist,c=e.shouldTrackEventResolver,s=(a=(u=i==null?void 0:i.tagName)===null||u===void 0?void 0:u.toLowerCase)===null||a===void 0?void 0:a.call(u);if(!s)return!1;if(c)return c(r,i);if(!Is(window.location.href,o))return!1;var d=String(i==null?void 0:i.getAttribute("type"))||"";if(typeof d=="string")switch(d.toLowerCase()){case"hidden":return!1;case"password":return!1}var l=Zr(i,r);if(n&&l)return!0;if(t){var h=t.some(function(f){var v;return!!(!((v=i==null?void 0:i.matches)===null||v===void 0)&&v.call(i,f))});if(!h)return!1}switch(s){case"input":case"select":case"textarea":return r==="change"||r==="click";default:return l?!0:r==="click"}}},ei=function(e){if(e==null)return!1;if(typeof e=="string"){var t=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;if(t.test((e||"").replace(/[- ]/g,"")))return!1;var n=/(^\d{3}-?\d{2}-?\d{4}$)/;if(n.test(e))return!1}return!0},Ss=function(e){return!!e&&e.nodeType===3},ti=function(e){var t,n,r,i=(n=(t=e==null?void 0:e.tagName)===null||t===void 0?void 0:t.toLowerCase)===null||n===void 0?void 0:n.call(t),u=e instanceof HTMLElement?((r=e.getAttribute("contenteditable"))===null||r===void 0?void 0:r.toLowerCase())==="true":!1;return!ws.includes(i)&&!u},Wt=function(e){var t="";return ti(e)&&e.childNodes&&e.childNodes.length&&e.childNodes.forEach(function(n){var r="";Ss(n)?n.textContent&&(r=n.textContent):r=Wt(n),t+=r.split(/(\s+)/).filter(ei).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}),t},Is=function(e,t){return!t||!t.length?!0:t.some(function(n){return typeof n=="string"?e===n:e.match(n)})},As=function(e,t){return e.getAttributeNames().reduce(function(n,r){if(r.startsWith(t)){var i=r.replace(t,""),u=e.getAttribute(r);i&&(n[i]=u||"")}return n},{})},ks=function(e){return e==null||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0},ni=function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return ks(r)||(t[n]=r),t},{})},ri=function(e){var t=e.parentElement;if(!t)return"";var n;try{n=t.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{n=null}if(n){var r=n.textContent||"";return ei(r)?r:""}return ri(t)},Kt=function(e,t){return e?t.some(function(n){var r;return(r=e==null?void 0:e.matches)===null||r===void 0?void 0:r.call(e,n)})?e:Kt(e==null?void 0:e.parentElement,t):null},Ps=function(e){var t,n,r;if(!e)return{};var i=(r=(n=e==null?void 0:e.tagName)===null||n===void 0?void 0:n.toLowerCase)===null||r===void 0?void 0:r.call(n),u=(t={},t[Pr]=i,t[Cr]=Wt(e),t[Rr]=window.location.href.split("?")[0],t);return ni(u)},Cs=function(e){return new Promise(function(t,n){var r;try{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.addEventListener("load",function(){t({status:!0})},{once:!0}),i.addEventListener("error",function(){n({status:!1,message:"Failed to load the script ".concat(e)})}),(r=document.head)===null||r===void 0||r.appendChild(i)}catch(u){n(u)}})};function Rs(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var Fe=function(e){return!(e.event.target===null||!e.closestTrackedAncestor)},Ne=function(e,t,n){var r,i,u,a=(u=(i=t==null?void 0:t.tagName)===null||i===void 0?void 0:i.toLowerCase)===null||u===void 0?void 0:u.call(i),o=typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{left:null,top:null},c=t.getAttribute("aria-label"),s=As(t,n),d=ri(t),l=(r={},r[Ha]=t.getAttribute("id")||"",r[Wa]=t.getAttribute("class"),r[Ka]=_s(t),r[Pr]=a,r[Cr]=Wt(t),r[Ya]=o.left==null?null:Math.round(o.left),r[Xa]=o.top==null?null:Math.round(o.top),r[Qa]=c,r[Ja]=s,r[Za]=d,r[Rr]=window.location.href.split("?")[0],r[eo]=typeof document<"u"&&document.title||"",r[to]=window.innerHeight,r[no]=window.innerWidth,r);return a==="a"&&e==="click"&&t instanceof HTMLAnchorElement&&(l[za]=t.href),ni(l)},ye=function(e,t,n,r,i){i===void 0&&(i=!1);var u={event:e,timestamp:Date.now(),type:t};if(Os(u)&&u.event.target!==null){if(i){var a=Zr(u.event.target,u.type);if(a)return u.closestTrackedAncestor=u.event.target,u.targetElementProperties=Ne(u.type,u.closestTrackedAncestor,r),u}var o=Kt(u.event.target,n);return o&&(u.closestTrackedAncestor=o,u.targetElementProperties=Ne(u.type,o,r)),u}return u};function Os(e){return e.type==="click"||e.type==="change"}var xs=function(){function e(t){var n=t===void 0?{}:t,r=n.origin,i=r===void 0?Xe:r,u=this;this.endpoint=Xe,this.requestCallbacks={},this.onSelect=function(a){u.notify({action:"element-selected",data:a})},this.onTrack=function(a,o){a==="selector-mode-changed"?u.notify({action:"track-selector-mode-changed",data:o}):a==="selector-moved"&&u.notify({action:"track-selector-moved",data:o})},this.endpoint=i}return e.prototype.notify=function(t){var n,r,i,u;(r=(n=this.logger)===null||n===void 0?void 0:n.debug)===null||r===void 0||r.call(n,"Message sent: ",JSON.stringify(t)),(u=(i=window.opener)===null||i===void 0?void 0:i.postMessage)===null||u===void 0||u.call(i,t,this.endpoint)},e.prototype.sendRequest=function(t,n,r){var i=this;r===void 0&&(r={timeout:15e3});var u=Rs(),a={id:u,action:t,args:n},o=new Promise(function(c,s){i.requestCallbacks[u]={resolve:c,reject:s},i.notify(a),(r==null?void 0:r.timeout)>0&&setTimeout(function(){s(new Error("".concat(t," timed out (id: ").concat(u,")"))),delete i.requestCallbacks[u]},r.timeout)});return o},e.prototype.handleResponse=function(t){var n;if(!this.requestCallbacks[t.id]){(n=this.logger)===null||n===void 0||n.warn("No callback found for request id: ".concat(t.id));return}this.requestCallbacks[t.id].resolve(t.responseData),delete this.requestCallbacks[t.id]},e.prototype.setup=function(t){var n=this,r=t===void 0?{}:t,i=r.logger,u=r.endpoint,a=r.isElementSelectable,o=r.cssSelectorAllowlist,c=r.actionClickAllowlist;this.logger=i,u&&this.endpoint===Xe&&(this.endpoint=u);var s=null;window.addEventListener("message",function(d){var l,h,f,v,m;if((h=(l=n.logger)===null||l===void 0?void 0:l.debug)===null||h===void 0||h.call(l,"Message received: ",JSON.stringify(d)),n.endpoint===d.origin){var y=d==null?void 0:d.data,p=y==null?void 0:y.action;if(p)if("id"in y)(v=(f=n.logger)===null||f===void 0?void 0:f.debug)===null||v===void 0||v.call(f,"Received Response to previous request: ",JSON.stringify(d)),n.handleResponse(y);else if(p==="ping")n.notify({action:"pong"});else if(p==="initialize-visual-tagging-selector"){var g=y==null?void 0:y.data;Cs(ao).then(function(){var b;s=(b=window==null?void 0:window.amplitudeVisualTaggingSelector)===null||b===void 0?void 0:b.call(window,{getEventTagProps:Ps,isElementSelectable:function(T){return a?a((g==null?void 0:g.actionType)||"click",T):!0},onTrack:n.onTrack,onSelect:n.onSelect,visualHighlightClass:oo,messenger:n,cssSelectorAllowlist:o,actionClickAllowlist:c}),n.notify({action:"selector-loaded"})}).catch(function(){var b;(b=n.logger)===null||b===void 0||b.warn("Failed to initialize visual tagging selector")})}else p==="close-visual-tagging-selector"&&((m=s==null?void 0:s.close)===null||m===void 0||m.call(s))}}),this.notify({action:"page-loaded"})},e}(),Ls=5;function Ns(e){var t=e.amplitude,n=e.allObservables,r=e.options,i=e.shouldTrackEvent,u=e.evaluateTriggers,a=n.clickObservable,o=a.pipe(cs(),Q(function(l){var h=R(l,2),f=h[0],v=h[1],m=f.event.target!==v.event.target,y=Math.abs(v.event.screenX-f.event.screenX)<=20&&Math.abs(v.event.screenY-f.event.screenY)<=20;return m&&!y})),c=a.pipe(us(r.debounceTime),G(function(){return"timeout"})),s=Gt(o,c),d=a.pipe(ss(0),Q(Fe),Q(function(l){return i("click",l.closestTrackedAncestor)}),G(function(l){return u(l)}),is(s));return d.subscribe(function(l){var h,f,v=(l.length>=Ls,Lt);try{for(var m=x(l),y=m.next();!y.done;y=m.next()){var p=y.value;t==null||t.track(v,p.targetElementProperties)}}catch(g){h={error:g}}finally{try{y&&!y.done&&(f=m.return)&&f.call(m)}finally{if(h)throw h.error}}})}function Ds(e){var t=e.amplitude,n=e.allObservables,r=e.getEventProperties,i=e.shouldTrackEvent,u=e.evaluateTriggers,a=n.changeObservable,o=a.pipe(Q(Fe),Q(function(c){return i("change",c.closestTrackedAncestor)}),G(function(c){return u(c)}));return o.subscribe(function(c){t==null||t.track(Ga,r("change",c.closestTrackedAncestor))})}function Ms(e){var t=e.amplitude,n=e.allObservables,r=e.options,i=e.getEventProperties,u=e.shouldTrackEvent,a=e.shouldTrackActionClick,o=n.clickObservable,c=n.mutationObservable,s=n.navigateObservable,d=o.pipe(Q(function(v){return!u("click",v.closestTrackedAncestor)}),G(function(v){var m=Kt(v.event.target,r.actionClickAllowlist);return v.closestTrackedAncestor=m,v.closestTrackedAncestor!==null&&(v.targetElementProperties=i(v.type,v.closestTrackedAncestor)),v}),Q(Fe),Q(function(v){return a("click",v.closestTrackedAncestor)})),l=[c];s&&l.push(s);var h=Gt.apply(void 0,L([],R(l),!1)),f=d.pipe(ds(function(v){return h.pipe(Ht(1),Vo({first:500,with:function(){return $t}}),G(function(){return v}))}));return f.subscribe(function(v){t==null||t.track(Lt,i("click",v.closestTrackedAncestor))})}var ii=function(){return new B(function(e){var t=new MutationObserver(function(n){e.next(n)});return t.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return t.disconnect()}})},ui=function(){return Ae(document,"click",{capture:!0})},Us=function(e,t){try{if(t.subprop_key==="[Amplitude] Element Text")return t.subprop_op==="exact"&&t.subprop_value.includes(e.targetElementProperties["[Amplitude] Element Text"]);if(t.subprop_key==="[Amplitude] Element Hierarchy")return t.subprop_op==="autotrack css match"&&!!e.closestTrackedAncestor.closest(t.subprop_value.toString())}catch(n){return console.error("Error matching event to filter",n),!1}return!1},js=function(e){var t,n,r,i,u,a={click:new Set,change:new Set};if(!e)return a;try{for(var o=x(e),c=o.next();!c.done;c=o.next()){var s=c.value;try{try{for(var d=(r=void 0,x(s.definition)),l=d.next();!l.done;l=d.next()){var h=l.value;(u=a[h.event_type])===null||u===void 0||u.add(s.id)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}catch(f){console.warn("Skipping Labeled Event due to malformed definition",s==null?void 0:s.id,f)}}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},Fs=function(e){var t,n,r,i,u=new Map;try{for(var a=x(e),o=a.next();!o.done;o=a.next()){var c=o.value;try{for(var s=(r=void 0,x(c.conditions)),d=s.next();!d.done;d=s.next()){var l=d.value;if(l.type==="LABELED_EVENT"){var h=l.match.eventId,f=u.get(h);f||(f=[],u.set(h,f)),f.push(c)}}}catch(v){r={error:v}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}}catch(v){t={error:v}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return u},qs=function(e,t){return t.filter(function(n){return n.definition.some(function(r){return r.event_type===e.type&&r.filters.every(function(i){return Us(e,i)})})})},Vs=function(e,t){var n,r,i=new Set;try{for(var u=x(e),a=u.next();!a.done;a=u.next()){var o=a.value,c=t.get(o.id);c&&c.forEach(function(s){return i.add(s)})}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return Array.from(i)},$s=function(e,t){if(e.sourceType==="DOM_ELEMENT"){var n=document.documentElement;return e.scope&&t&&(n=t.closest(e.scope)),n&&e.selector?n.querySelector(e.selector):n}},Bs=function(e,t){if(e.sourceType==="DOM_ELEMENT"){var n=$s(e,t);return n?e.elementExtractType==="TEXT"?n.textContent:e.elementExtractType==="ATTRIBUTE"&&e.attribute?n.getAttribute(e.attribute):void 0:void 0}},Gs=function(e,t){e.forEach(function(n){if(typeof n!="string"&&n.actionType==="ATTACH_EVENT_PROPERTY"){var r=Bs(n.dataSource,t.closestTrackedAncestor);t.targetElementProperties[n.destinationKey]=r}})},oe;(function(e){e.ClickObservable="clickObservable",e.ChangeObservable="changeObservable",e.NavigateObservable="navigateObservable",e.MutationObservable="mutationObservable"})(oe||(oe={}));var Hs=function(e){var t,n,r,i,u,a,o;e===void 0&&(e={});var c=e.dataAttributePrefix,s=c===void 0?vr:c,d=e.visualTaggingOptions,l=d===void 0?{enabled:!0,messenger:new xs}:d;e.cssSelectorAllowlist=(t=e.cssSelectorAllowlist)!==null&&t!==void 0?t:Tu,e.actionClickAllowlist=(n=e.actionClickAllowlist)!==null&&n!==void 0?n:wu,e.debounceTime=(r=e.debounceTime)!==null&&r!==void 0?r:0;var h=qa,f="enrichment",v=[],m=function(){var w,A=ui().pipe(G(function(M){return ye(M,"click",e.cssSelectorAllowlist,s)}),me()),C=Ae(document,"change",{capture:!0}).pipe(G(function(M){return ye(M,"change",e.cssSelectorAllowlist,s)}),me()),O;window.navigation&&(O=Ae(window.navigation,"navigate").pipe(G(function(M){return ye(M,"navigate",e.cssSelectorAllowlist,s)}),me()));var U=ii().pipe(G(function(M){return ye(M,"mutation",e.cssSelectorAllowlist,s)}),me());return w={},w[oe.ClickObservable]=A,w[oe.ChangeObservable]=C,w[oe.NavigateObservable]=O,w[oe.MutationObservable]=U,w},y=js(Object.values((u=(i=e.pageActions)===null||i===void 0?void 0:i.labeledEvents)!==null&&u!==void 0?u:{})),p=Fs((o=(a=e.pageActions)===null||a===void 0?void 0:a.triggers)!==null&&o!==void 0?o:[]),g=function(w){var A,C,O=e.pageActions;if(!O)return w;var U=qs(w,Array.from(y[w.type]).map(function(X){return O.labeledEvents[X]})),M=Vs(U,p);try{for(var V=x(M),W=V.next();!W.done;W=V.next()){var Z=W.value;Gs(Z.actions,w)}}catch(X){A={error:X}}finally{try{W&&!W.done&&(C=V.return)&&C.call(V)}finally{if(A)throw A.error}}return w},b=function(w,A){return _(void 0,void 0,void 0,function(){var C,O,U,M,V,W,Z,X,ie,de;return E(this,function(Ee){return typeof document>"u"?[2]:(C=Oe(e,e.cssSelectorAllowlist),O=Oe(e,e.actionClickAllowlist),U=m(),M=Ns({allObservables:U,options:e,amplitude:A,shouldTrackEvent:C,evaluateTriggers:g}),v.push(M),V=Ds({allObservables:U,getEventProperties:function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];return Ne.apply(void 0,L(L([],R(re),!1),[s],!1))},amplitude:A,shouldTrackEvent:C,evaluateTriggers:g}),v.push(V),W=Ms({allObservables:U,options:e,getEventProperties:function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];return Ne.apply(void 0,L(L([],R(re),!1),[s],!1))},amplitude:A,shouldTrackEvent:C,shouldTrackActionClick:O}),v.push(W),(ie=w==null?void 0:w.loggerProvider)===null||ie===void 0||ie.log("".concat(h," has been successfully added.")),window.opener&&l.enabled&&(Z=e.cssSelectorAllowlist,X=e.actionClickAllowlist,(de=l.messenger)===null||de===void 0||de.setup(S(S({logger:w==null?void 0:w.loggerProvider},(w==null?void 0:w.serverZone)&&{endpoint:uo[w.serverZone]}),{isElementSelectable:Oe(e,L(L([],R(Z),!1),R(X),!1)),cssSelectorAllowlist:Z,actionClickAllowlist:X}))),[2])})})},T=function(w){return _(void 0,void 0,void 0,function(){return E(this,function(A){return[2,w]})})},I=function(){return _(void 0,void 0,void 0,function(){var w,A,C,O,U;return E(this,function(M){try{for(w=x(v),A=w.next();!A.done;A=w.next())C=A.value,C.unsubscribe()}catch(V){O={error:V}}finally{try{A&&!A.done&&(U=w.return)&&U.call(w)}finally{if(O)throw O.error}}return[2]})})};return{name:h,type:f,setup:b,execute:T,teardown:I}},Dn=3e3;function Ws(e){var t=e.amplitude,n=e.allObservables,r=e.getEventProperties,i=e.shouldTrackDeadClick,u=n.clickObservable,a=n.mutationObservable,o=n.navigateObservable,c=u.pipe(Q(Fe),Q(function(h){return i("click",h.closestTrackedAncestor)})),s=[a];o&&s.push(o);var d=Gt.apply(void 0,L([],R(s),!1)),l=c.pipe(je(function(h){var f,v=new B(function(m){return f=setTimeout(function(){return m.next(h)},Dn),function(){clearTimeout(f)}});return ns(v,d.pipe(Ht(1),G(function(){return null}))).pipe(Q(function(m){return m!==null}))}),fs(Dn));return l.subscribe(function(h){var f={"[Amplitude] X":h.event.clientX,"[Amplitude] Y":h.event.clientY};t.track($a,S(S({},r("click",h.closestTrackedAncestor)),f),{time:h.timestamp})})}var Ks=Pu,zs=ku;function Ys(e){var t=e.amplitude,n=e.allObservables,r=e.shouldTrackRageClick,i=n.clickObservable,u=[];return i.pipe(Q(Fe),Q(function(a){return r("click",a.closestTrackedAncestor)}),G(function(a){var o=a.timestamp;u.length>0&&u[u.length-1].closestTrackedAncestor!==a.closestTrackedAncestor&&u.splice(0,u.length);for(var c=0;c<u.length&&!(o-u[c].timestamp<zs);c++);if(u.splice(0,c),u.push(a),u.length<Ks)return null;var s=u[0],d=u[u.length-1],l=S({"[Amplitude] Begin Time":new Date(s.timestamp).toISOString(),"[Amplitude] End Time":new Date(d.timestamp).toISOString(),"[Amplitude] Duration":d.timestamp-s.timestamp,"[Amplitude] Clicks":u.map(function(h){return{X:h.event.clientX,Y:h.event.clientY,Time:h.timestamp}}),"[Amplitude] Click Count":u.length},s.targetElementProperties);return u.splice(0,u.length),{rageClickEvent:l,time:s.timestamp}}),Q(function(a){return a!==null})).subscribe(function(a){a!==null&&t.track(Ba,a.rageClickEvent,{time:a.time})})}var Xs=function(e){var t,n,r,i,u;e===void 0&&(e={});var a=Va,o="enrichment",c=[],s=(n=(t=e.rageClicks)===null||t===void 0?void 0:t.cssSelectorAllowlist)!==null&&n!==void 0?n:Au,d=(i=(r=e.deadClicks)===null||r===void 0?void 0:r.cssSelectorAllowlist)!==null&&i!==void 0?i:Iu,l=(u=e.dataAttributePrefix)!==null&&u!==void 0?u:vr,h=L([],R(new Set(L(L([],R(s),!1),R(d),!1))),!1),f=function(){var p,g=ui().pipe(G(function(I){return ye(I,"click",h,l,!0)}),me()),b;window.navigation&&(b=Ae(window.navigation,"navigate").pipe(G(function(I){return ye(I,"navigate",h,l)}),me()));var T=ii().pipe(G(function(I){return ye(I,"mutation",h,l)}),me());return p={},p[oe.ClickObservable]=g,p[oe.ChangeObservable]=new B,p[oe.NavigateObservable]=b,p[oe.MutationObservable]=T,p},v=function(p,g){return _(void 0,void 0,void 0,function(){var b,T,I,w,A,C;return E(this,function(O){return typeof document>"u"?[2]:(b=Oe(e,s),T=Oe(e,d),I=f(),w=Ys({allObservables:I,amplitude:g,shouldTrackRageClick:b}),c.push(w),A=Ws({amplitude:g,allObservables:I,getEventProperties:function(U,M){return Ne(U,M,l)},shouldTrackDeadClick:T}),c.push(A),(C=p==null?void 0:p.loggerProvider)===null||C===void 0||C.log("".concat(a," has been successfully added.")),[2])})})},m=function(p){return _(void 0,void 0,void 0,function(){return E(this,function(g){return[2,p]})})},y=function(){return _(void 0,void 0,void 0,function(){var p,g,b,T,I;return E(this,function(w){try{for(p=x(c),g=p.next();!g.done;g=p.next())b=g.value,b.unsubscribe()}catch(A){T={error:A}}finally{try{g&&!g.done&&(I=p.return)&&I.call(p)}finally{if(T)throw T.error}}return[2]})})};return{name:a,type:o,setup:v,execute:m,teardown:y}},Qs="@amplitude/plugin-network-capture-browser",ai="[Amplitude] Network Request",oi="500-599";function Ze(e,t){var n=t.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),r="^"+n.replace(/\*/g,".*")+"$",i=new RegExp(r);return i.test(e)}function si(e,t){var n,r,i=t.split(",");try{for(var u=x(i),a=u.next();!a.done;a=u.next()){var o=a.value,c=R(o.split("-").map(Number),2),s=c[0],d=c[1];if(e===s&&d===void 0||e>=s&&e<=d)return!0}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return!1}function Js(e,t,n){if(!(e.hosts&&!e.hosts.find(function(i){return Ze(t,i)}))){if(n||n===0){var r=e.statusCodeRange||oi;if(!si(n,r))return!1}return!0}}function ci(e){var t;if(e)try{var n=(t=H())===null||t===void 0?void 0:t.location.href,r=new URL(e,n),i=r.searchParams.toString(),u=r.hash.replace("#",""),a=r.href,o=r.host;r.hash="",r.search="";var c=r.href;return{query:i,fragment:u,href:a,hrefWithoutQueryOrHash:c,host:o}}catch{return}}function Zs(e,t){if(e.includes("amplitude.com"))try{var n=t.body;if(typeof n!="string")return!1;var r=JSON.parse(n),i=r.events;if(i.find(function(u){return u.event_type===ai}))return!0}catch{}return!1}function ec(e,t){var n;t===void 0&&(t={});var r=ci(e.url);if(!r)return!1;var i=r.host;if(t.ignoreAmplitudeRequests!==!1&&(Ze(i,"*.amplitude.com")||Ze(i,"amplitude.com"))||!((n=t.ignoreHosts)===null||n===void 0)&&n.find(function(a){return Ze(i,a)})||!t.captureRules&&e.status!==void 0&&!si(e.status,oi))return!1;if(t.captureRules){var u;if(L([],R(t.captureRules),!1).reverse().find(function(a){return u=Js(a,i,e.status),u!==void 0}),!u)return!1}return!(e.requestWrapper&&Zs(i,e.requestWrapper))}function tc(e){var t=e.allObservables,n=e.networkTrackingOptions,r=e.amplitude,i=t.networkObservable,u=i.pipe(Q(function(a){return ec(a.event,n)}));return u.subscribe(function(a){var o,c,s,d=a.event,l=ci(d.url);if(l){var h=(c=d.responseWrapper)===null||c===void 0?void 0:c.bodySize,f=(s=d.requestWrapper)===null||s===void 0?void 0:s.bodySize,v=(o={},o["[Amplitude] URL"]=l.hrefWithoutQueryOrHash,o["[Amplitude] URL Query"]=l.query,o["[Amplitude] URL Fragment"]=l.fragment,o["[Amplitude] Request Method"]=d.method,o["[Amplitude] Status Code"]=d.status,o["[Amplitude] Start Time"]=d.startTime,o["[Amplitude] Completion Time"]=d.endTime,o["[Amplitude] Duration"]=d.duration,o["[Amplitude] Request Body Size"]=f,o["[Amplitude] Response Body Size"]=h,o["[Amplitude] Request Type"]=d.type,o);r==null||r.track(ai,v)}})}var Dt;(function(e){e.NetworkObservable="networkObservable"})(Dt||(Dt={}));var nc=function(e){e===void 0&&(e={});var t=Qs,n="enrichment",r,i=[],u=function(d,l){var h={event:d,timestamp:Date.now(),type:l};return h},a=function(){var d,l=new B(function(h){var f=new Du(function(v){var m=u(v,"network");h.next(m)});return un.subscribe(f,r),function(){un.unsubscribe(f)}});return d={},d[Dt.NetworkObservable]=l,d},o=function(d,l){return _(void 0,void 0,void 0,function(){var h,f;return E(this,function(v){return typeof document>"u"?[2]:(h=a(),f=tc({allObservables:h,networkTrackingOptions:e,amplitude:l}),i.push(f),r=d==null?void 0:d.loggerProvider,r==null||r.log("".concat(t," has been successfully added.")),[2])})})},c=function(d){return _(void 0,void 0,void 0,function(){return E(this,function(l){return[2,d]})})},s=function(){return _(void 0,void 0,void 0,function(){var d,l,h,f,v;return E(this,function(m){try{for(d=x(i),l=d.next();!l.done;l=d.next())h=l.value,h.unsubscribe()}catch(y){f={error:y}}finally{try{l&&!l.done&&(v=d.return)&&v.call(d)}finally{if(f)throw f.error}}return[2]})})};return{name:t,type:n,setup:o,execute:c,teardown:s}},rc="web-vitals-browser",ic="[Amplitude] Web Vitals";let di=-1;const ke=e=>{addEventListener("pageshow",t=>{t.persisted&&(di=t.timeStamp,e(t))},!0)},se=(e,t,n,r)=>{let i,u;return a=>{t.value>=0&&(a||r)&&(u=t.value-(i??0),(u||i===void 0)&&(i=t.value,t.delta=u,t.rating=((o,c)=>o>c[1]?"poor":o>c[0]?"needs-improvement":"good")(t.value,n),e(t)))}},zt=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},Yt=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},qe=()=>{const e=Yt();return(e==null?void 0:e.activationStart)??0},ce=(e,t=-1)=>{const n=Yt();let r="navigate";return di>=0?r="back-forward-cache":n&&(document.prerendering||qe()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},kt=new WeakMap;function Xt(e,t){return kt.get(e)||kt.set(e,new t),kt.get(e)}class uc{constructor(){le(this,"t");le(this,"i",0);le(this,"o",[])}h(t){var i;if(t.hadRecentInput)return;const n=this.o[0],r=this.o.at(-1);this.i&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this.i+=t.value,this.o.push(t)):(this.i=t.value,this.o=[t]),(i=this.t)==null||i.call(this,t)}}const Ve=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{t(i.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},Qt=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let we=-1;const Mn=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,ot=e=>{document.visibilityState==="hidden"&&we>-1&&(we=e.type==="visibilitychange"?e.timeStamp:0,ac())},Un=()=>{addEventListener("visibilitychange",ot,!0),addEventListener("prerenderingchange",ot,!0)},ac=()=>{removeEventListener("visibilitychange",ot,!0),removeEventListener("prerenderingchange",ot,!0)},li=()=>{var e;if(we<0){const t=qe();we=(document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0])==null?void 0:e.startTime)??Mn(),Un(),ke(()=>{setTimeout(()=>{we=Mn(),Un()})})}return{get firstHiddenTime(){return we}}},dt=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},jn=[1800,3e3],fi=(e,t={})=>{dt(()=>{const n=li();let r,i=ce("FCP");const u=Ve("paint",a=>{for(const o of a)o.name==="first-contentful-paint"&&(u.disconnect(),o.startTime<n.firstHiddenTime&&(i.value=Math.max(o.startTime-qe(),0),i.entries.push(o),r(!0)))});u&&(r=se(e,i,jn,t.reportAllChanges),ke(a=>{i=ce("FCP"),r=se(e,i,jn,t.reportAllChanges),zt(()=>{i.value=performance.now()-a.timeStamp,r(!0)})}))})},Fn=[.1,.25],oc=(e,t={})=>{fi(Qt(()=>{let n,r=ce("CLS",0);const i=Xt(t,uc),u=o=>{for(const c of o)i.h(c);i.i>r.value&&(r.value=i.i,r.entries=i.o,n())},a=Ve("layout-shift",u);a&&(n=se(e,r,Fn,t.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(u(a.takeRecords()),n(!0))}),ke(()=>{i.i=0,r=ce("CLS",0),n=se(e,r,Fn,t.reportAllChanges),zt(()=>n())}),setTimeout(n))}))};let hi=0,Pt=1/0,We=0;const sc=e=>{for(const t of e)t.interactionId&&(Pt=Math.min(Pt,t.interactionId),We=Math.max(We,t.interactionId),hi=We?(We-Pt)/7+1:0)};let Mt;const qn=()=>Mt?hi:performance.interactionCount??0,cc=()=>{"interactionCount"in performance||Mt||(Mt=Ve("event",sc,{type:"event",buffered:!0,durationThreshold:0}))};let Vn=0;class dc{constructor(){le(this,"u",[]);le(this,"l",new Map);le(this,"m");le(this,"v")}p(){Vn=qn(),this.u.length=0,this.l.clear()}P(){const t=Math.min(this.u.length-1,Math.floor((qn()-Vn)/50));return this.u[t]}h(t){var i,u;if((i=this.m)==null||i.call(this,t),!t.interactionId&&t.entryType!=="first-input")return;const n=this.u.at(-1);let r=this.l.get(t.interactionId);if(r||this.u.length<10||t.duration>n.T){if(r?t.duration>r.T?(r.entries=[t],r.T=t.duration):t.duration===r.T&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],T:t.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort((a,o)=>o.T-a.T),this.u.length>10){const a=this.u.splice(10);for(const o of a)this.l.delete(o.id)}(u=this.v)==null||u.call(this,r)}}}const vi=e=>{const t=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(e=Qt(e),document.addEventListener("visibilitychange",e,{once:!0}),t(()=>{e(),document.removeEventListener("visibilitychange",e)}))},$n=[200,500],lc=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&dt(()=>{cc();let n,r=ce("INP");const i=Xt(t,dc),u=o=>{vi(()=>{for(const s of o)i.h(s);const c=i.P();c&&c.T!==r.value&&(r.value=c.T,r.entries=c.entries,n())})},a=Ve("event",u,{durationThreshold:t.durationThreshold??40});n=se(e,r,$n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(u(a.takeRecords()),n(!0))}),ke(()=>{i.p(),r=ce("INP"),n=se(e,r,$n,t.reportAllChanges)}))})};class fc{constructor(){le(this,"m")}h(t){var n;(n=this.m)==null||n.call(this,t)}}const Bn=[2500,4e3],hc=(e,t={})=>{dt(()=>{const n=li();let r,i=ce("LCP");const u=Xt(t,fc),a=c=>{t.reportAllChanges||(c=c.slice(-1));for(const s of c)u.h(s),s.startTime<n.firstHiddenTime&&(i.value=Math.max(s.startTime-qe(),0),i.entries=[s],r())},o=Ve("largest-contentful-paint",a);if(o){r=se(e,i,Bn,t.reportAllChanges);const c=Qt(()=>{a(o.takeRecords()),o.disconnect(),r(!0)});for(const s of["keydown","click","visibilitychange"])addEventListener(s,()=>vi(c),{capture:!0,once:!0});ke(s=>{i=ce("LCP"),r=se(e,i,Bn,t.reportAllChanges),zt(()=>{i.value=performance.now()-s.timeStamp,r(!0)})})}})},Gn=[800,1800],Ut=e=>{document.prerendering?dt(()=>Ut(e)):document.readyState!=="complete"?addEventListener("load",()=>Ut(e),!0):setTimeout(e)},vc=(e,t={})=>{let n=ce("TTFB"),r=se(e,n,Gn,t.reportAllChanges);Ut(()=>{const i=Yt();i&&(n.value=Math.max(i.responseStart-qe(),0),n.entries=[i],r(!0),ke(()=>{n=ce("TTFB",0),r=se(e,n,Gn,t.reportAllChanges),r(!0)}))})};function pc(e){var t,n=((t=e.entries[0])===null||t===void 0?void 0:t.startTime)||0;return performance.timeOrigin+n}function Re(e){return{value:e.value,rating:e.rating,delta:e.delta,navigationType:e.navigationType,id:e.id,timestamp:Math.floor(pc(e)),navigationStart:Math.floor(performance.timeOrigin)}}var gc=function(){var e=null,t=H(),n=t==null?void 0:t.document,r=t==null?void 0:t.location,i=function(o,c){return _(void 0,void 0,void 0,function(){var s,d,l;return E(this,function(h){return s=function(f){var v;if(!f)return"";var m=f;try{m=decodeURI(f)}catch(y){(v=o.loggerProvider)===null||v===void 0||v.error("Malformed URI sequence: ",y)}return m},n===void 0?[2]:(d=s(r==null?void 0:r.href),l={"[Amplitude] Page Domain":(r==null?void 0:r.hostname)||"","[Amplitude] Page Location":d,"[Amplitude] Page Path":s(r==null?void 0:r.pathname),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":d.split("?")[0]},hc(function(f){l["[Amplitude] LCP"]=Re(f)}),fi(function(f){l["[Amplitude] FCP"]=Re(f)}),lc(function(f){l["[Amplitude] INP"]=Re(f)}),oc(function(f){l["[Amplitude] CLS"]=Re(f)}),vc(function(f){l["[Amplitude] TTFB"]=Re(f)}),e=function(){n.visibilityState==="hidden"&&e&&(c.track(ic,l),n.removeEventListener("visibilitychange",e),e=null)},n.addEventListener("visibilitychange",e),[2])})})},u=function(o){return _(void 0,void 0,void 0,function(){return E(this,function(c){return[2,o]})})},a=function(){return _(void 0,void 0,void 0,function(){return E(this,function(o){return e&&(n==null||n.removeEventListener("visibilitychange",e)),[2]})})};return{name:rc,type:"enrichment",setup:i,execute:u,teardown:a}},mc="utm_campaign",yc="utm_content",bc="utm_id",Ec="utm_medium",_c="utm_source",Tc="utm_term",Hn="dclid",Wn="fbclid",Kn="gbraid",zn="gclid",Yn="ko_click_id",Xn="li_fat_id",Qn="msclkid",Jn="rtd_cid",Zn="ttclid",er="twclid",tr="wbraid",Jt={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},nr=function(e){var t=e.split(".");return t.length<=2?e:t.slice(t.length-2,t.length).join(".")},wc=function(e){return Object.values(e).every(function(t){return!t})},Sc=function(e,t,n,r,i){i===void 0&&(i=!0),e.referrer;var u=e.referring_domain,a=Rt(e,["referrer","referring_domain"]),o=t||{};o.referrer;var c=o.referring_domain,s=Rt(o,["referrer","referring_domain"]);if(Ic(n.excludeReferrers,e.referring_domain))return r.debug("This is not a new campaign because ".concat(e.referring_domain," is in the exclude referrer list.")),!1;if(!i&&wc(e)&&t)return r.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var d=JSON.stringify(a)!==JSON.stringify(s),l=nr(u||"")!==nr(c||""),h=!t||d||l;return h?r.debug("This is a new campaign. An $identify event will be sent."):r.debug("This is not a new campaign because it's the same as the previous one."),h},Ic=function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=""),e.some(function(n){return n instanceof RegExp?n.test(t):n===t})},Ac=function(e,t){var n=S(S({},Jt),e),r=Object.entries(n).reduce(function(i,u){var a,o=R(u,2),c=o[0],s=o[1];return i.setOnce("initial_".concat(c),(a=s??t.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),s?i.set(c,s):i.unset(c)},new et);return sr(r)},kc=function(e){var t=e;return t?(t.startsWith(".")&&(t=t.substring(1)),[new RegExp("".concat(t.replace(".","\\."),"$"))]):[]},Pc=function(){function e(){}return e.prototype.parse=function(){return _(this,void 0,void 0,function(){return E(this,function(t){return[2,S(S(S(S({},Jt),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},e.prototype.getUtmParam=function(){var t=tt(),n=t[mc],r=t[yc],i=t[bc],u=t[Ec],a=t[_c],o=t[Tc];return{utm_campaign:n,utm_content:r,utm_id:i,utm_medium:u,utm_source:a,utm_term:o}},e.prototype.getReferrer=function(){var t,n,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(n=(t=r.referrer)===null||t===void 0?void 0:t.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return r},e.prototype.getClickIds=function(){var t,n=tt();return t={},t[Hn]=n[Hn],t[Wn]=n[Wn],t[Kn]=n[Kn],t[zn]=n[zn],t[Yn]=n[Yn],t[Xn]=n[Xn],t[Qn]=n[Qn],t[Jn]=n[Jn],t[Zn]=n[Zn],t[er]=n[er],t[tr]=n[tr],t},e}(),Cc=function(){function e(t,n){var r;this.shouldTrackNewCampaign=!1,this.options=S({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:kc((r=n.cookieOptions)===null||r===void 0?void 0:r.domain)},t),this.storage=n.cookieStorage,this.storageKey=bu(n.apiKey,"MKTG"),this.currentCampaign=Jt,this.sessionTimeout=n.sessionTimeout,this.lastEventTime=n.lastEventTime,this.logger=n.loggerProvider,n.loggerProvider.log("Installing web attribution tracking.")}return e.prototype.init=function(){return _(this,void 0,void 0,function(){var t,n;return E(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return n=R.apply(void 0,[r.sent(),2]),this.currentCampaign=n[0],this.previousCampaign=n[1],t=this.lastEventTime?fr(this.sessionTimeout,this.lastEventTime):!0,Sc(this.currentCampaign,this.previousCampaign,this.options,this.logger,t)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.fetchCampaign=function(){return _(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,Promise.all([new Pc().parse(),this.storage.get(this.storageKey)])];case 1:return[2,t.sent()]}})})},e.prototype.generateCampaignEvent=function(t){this.shouldTrackNewCampaign=!1;var n=Ac(this.currentCampaign,this.options);return t&&(n.event_id=t),n},e.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},e}(),Rc=function(e){J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(n,r,i){n===void 0&&(n="");var u,a;return arguments.length>2?(u=r,a=i):typeof r=="string"?(u=r,a=void 0):(u=r==null?void 0:r.userId,a=r),ee(this._init(S(S({},a),{userId:u,apiKey:n})))},t.prototype._init=function(n){var r,i,u;return _(this,void 0,void 0,function(){var a,o,c,s,d,l,h=this;return E(this,function(f){switch(f.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,ca(n.apiKey,n,this)]);case 1:return a=f.sent(),a.fetchRemoteConfig?[4,Fa(a)]:[3,4];case 2:return o=f.sent(),[4,o.generateJoinedConfig()];case 3:a=f.sent(),f.label=4;case 4:return[4,e.prototype._init.call(this,a)];case 5:return f.sent(),this.logBrowserOptions(a),mr(this.config.defaultTracking)?(c=Gu(this.config),this.webAttribution=new Cc(c,this.config),[4,this.webAttribution.init()]):[3,7];case 6:f.sent(),f.label=7;case 7:return s=tt(),d=Number.isNaN(Number(s.ampSessionId))?void 0:Number(s.ampSessionId),this.setSessionId((u=(i=(r=n.sessionId)!==null&&r!==void 0?r:d)!==null&&i!==void 0?i:this.config.sessionId)!==null&&u!==void 0?u:Date.now()),l=xe(n.instanceName),l.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===_u?[3,9]:[4,this.add(Pa()).promise];case 8:f.sent(),f.label=9;case 9:return[4,this.add(new tu).promise];case 10:return f.sent(),[4,this.add(new zu).promise];case 11:return f.sent(),[4,this.add(new fu).promise];case 12:return f.sent(),ka(this.config),Uu(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(Aa()).promise]):[3,14];case 13:f.sent(),f.label=14;case 14:return ju(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(Ia()).promise]):[3,16];case 15:f.sent(),f.label=16;case 16:return yr(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(_a(Bu(this.config))).promise]):[3,18];case 17:f.sent(),f.label=18;case 18:return Er(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(Hs(qu(this.config))).promise]):[3,20];case 19:f.sent(),f.label=20;case 20:return _r(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(Xs(Vu(this.config))).promise]):[3,22];case 21:f.sent(),f.label=22;case 22:return br(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(nc($u(this.config))).promise]):[3,24];case 23:f.sent(),f.label=24;case 24:return Fu(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(gc()).promise]):[3,26];case 25:f.sent(),f.label=26;case 26:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 27:return f.sent(),l.eventBridge.setEventReceiver(function(v){h.track(v.eventType,v.eventProperties)}),[2]}})})},t.prototype.getUserId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.userId},t.prototype.setUserId=function(n){if(!this.config){this.q.push(this.setUserId.bind(this,n));return}this.config.loggerProvider.debug("function setUserId: ",n),(n!==this.config.userId||n===void 0)&&(this.config.userId=n,this.timeline.onIdentityChanged({userId:n}),du(n,this.config.instanceName))},t.prototype.getDeviceId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.deviceId},t.prototype.setDeviceId=function(n){if(!this.config){this.q.push(this.setDeviceId.bind(this,n));return}this.config.loggerProvider.debug("function setDeviceId: ",n),n!==this.config.deviceId&&(this.config.deviceId=n,this.timeline.onIdentityChanged({deviceId:n}),lu(n,this.config.instanceName))},t.prototype.reset=function(){this.setDeviceId(be()),this.setUserId(void 0)},t.prototype.getIdentity=function(){var n,r;return{deviceId:(n=this.config)===null||n===void 0?void 0:n.deviceId,userId:(r=this.config)===null||r===void 0?void 0:r.userId,userProperties:this.userProperties}},t.prototype.getOptOut=function(){return this.config.optOut},t.prototype.getSessionId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.sessionId},t.prototype.setSessionId=function(n){var r,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,n)),ee(Promise.resolve());if(n===this.config.sessionId)return ee(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",n);var u=this.getSessionId();u!==n&&this.timeline.onSessionIdChanged(n);var a=this.config.lastEventTime,o=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=n,this.config.lastEventTime=void 0,this.config.pageCounter=0,an(this.config.defaultTracking)&&(u&&a&&i.push(this.track(cn,void 0,{device_id:this.previousSessionDeviceId,event_id:++o,session_id:u,time:a+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var c=this.trackCampaignEventIfNeeded(++o,i);return an(this.config.defaultTracking)&&i.push(this.track(sn,void 0,{event_id:c?++o:o,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,ee(Promise.all(i))},t.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},t.prototype.setTransport=function(n){if(!this.config){this.q.push(this.setTransport.bind(this,n));return}this.config.transportProvider=Ir(n)},t.prototype.identify=function(n,r){if(Et(n)){var i=n._q;n._q=[],n=bt(new et,i)}return r!=null&&r.user_id&&this.setUserId(r.user_id),r!=null&&r.device_id&&this.setDeviceId(r.device_id),e.prototype.identify.call(this,n,r)},t.prototype.groupIdentify=function(n,r,i,u){if(Et(i)){var a=i._q;i._q=[],i=bt(new et,a)}return e.prototype.groupIdentify.call(this,n,r,i,u)},t.prototype.revenue=function(n,r){if(Et(n)){var i=n._q;n._q=[],n=bt(new Xi,i)}return e.prototype.revenue.call(this,n,r)},t.prototype.trackCampaignEventIfNeeded=function(n,r){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(n);return r?r.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},t.prototype.process=function(n){return _(this,void 0,void 0,function(){var r,i,u;return E(this,function(a){return r=Date.now(),i=fr(this.config.sessionTimeout,this.config.lastEventTime),u=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),n.event_type!==sn&&n.event_type!==cn&&(!n.session_id||n.session_id===this.getSessionId())&&(i||u?(this.setSessionId(r),u&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),n.event_type===pe.IDENTIFY&&n.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(n.user_properties)),[2,e.prototype.process.call(this,n)]})})},t.prototype.logBrowserOptions=function(n){try{var r=S(S({},n),{apiKey:n.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(r))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},t}(Yi),Oc=function(){var e=new Rc;return{init:q(e.init.bind(e),"init",j(e),F(e,["config"])),add:q(e.add.bind(e),"add",j(e),F(e,["config.apiKey","timeline.plugins"])),remove:q(e.remove.bind(e),"remove",j(e),F(e,["config.apiKey","timeline.plugins"])),track:q(e.track.bind(e),"track",j(e),F(e,["config.apiKey","timeline.queue.length"])),logEvent:q(e.logEvent.bind(e),"logEvent",j(e),F(e,["config.apiKey","timeline.queue.length"])),identify:q(e.identify.bind(e),"identify",j(e),F(e,["config.apiKey","timeline.queue.length"])),groupIdentify:q(e.groupIdentify.bind(e),"groupIdentify",j(e),F(e,["config.apiKey","timeline.queue.length"])),setGroup:q(e.setGroup.bind(e),"setGroup",j(e),F(e,["config.apiKey","timeline.queue.length"])),revenue:q(e.revenue.bind(e),"revenue",j(e),F(e,["config.apiKey","timeline.queue.length"])),flush:q(e.flush.bind(e),"flush",j(e),F(e,["config.apiKey","timeline.queue.length"])),getUserId:q(e.getUserId.bind(e),"getUserId",j(e),F(e,["config","config.userId"])),setUserId:q(e.setUserId.bind(e),"setUserId",j(e),F(e,["config","config.userId"])),getDeviceId:q(e.getDeviceId.bind(e),"getDeviceId",j(e),F(e,["config","config.deviceId"])),setDeviceId:q(e.setDeviceId.bind(e),"setDeviceId",j(e),F(e,["config","config.deviceId"])),reset:q(e.reset.bind(e),"reset",j(e),F(e,["config","config.userId","config.deviceId"])),getSessionId:q(e.getSessionId.bind(e),"getSessionId",j(e),F(e,["config"])),setSessionId:q(e.setSessionId.bind(e),"setSessionId",j(e),F(e,["config"])),extendSession:q(e.extendSession.bind(e),"extendSession",j(e),F(e,["config"])),setOptOut:q(e.setOptOut.bind(e),"setOptOut",j(e),F(e,["config"])),setTransport:q(e.setTransport.bind(e),"setTransport",j(e),F(e,["config"])),getIdentity:q(e.getIdentity.bind(e),"getIdentity",j(e),F(e,["config"])),getOptOut:q(e.getOptOut.bind(e),"getOptOut",j(e),F(e,["config"]))}};const pi=Oc();var xc=pi.init,Lc=pi.track;const Nc=()=>{const e=window.__AMPLITUDE_API_KEY__;e?(xc(e,void 0,{logLevel:te.Warn,flushIntervalMillis:3e4,flushQueueSize:50,useBatch:!0}),console.log("Amplitude initialized")):console.warn("Amplitude API key not found")},Dc=e=>{Lc("Page View",{page:e,timestamp:Date.now()})};Nc();const Mc=ur.lazy(()=>rr(()=>import("./HomePage.js"),__vite__mapDeps([0,1,2,3,4,5]))),Uc=ur.lazy(()=>rr(()=>import("./CaptureDeepDive.js"),__vite__mapDeps([6,1,2,3,4,5]))),jc=new _i;function Fc(){const e=ir();return fe.useEffect(()=>{const t=e.pathname==="/"?"Home":e.pathname.slice(1);Dc(t)},[e]),null}function qc(){return k.jsx(Ti,{client:jc,children:k.jsxs(bi,{children:[k.jsx(Fc,{}),k.jsx(Ai,{children:k.jsx(fe.Suspense,{fallback:k.jsx(ki,{}),children:k.jsxs(Ei,{children:[k.jsx(Zt,{path:"/",element:k.jsx(Mc,{})}),k.jsx(Zt,{path:"/capture",element:k.jsx(Uc,{})})]})})})]})})}yi.createRoot(document.getElementById("root")).render(k.jsx(qc,{}));export{ki as L,Wc as a,Hc as u};
