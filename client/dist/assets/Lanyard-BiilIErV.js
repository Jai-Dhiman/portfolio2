import{j as e}from"./routing-B9m-d95p.js";import{r}from"./vendor-kgJ0oZpr.js";import{C as t,a as n,P as s,E as i,L as o,e as a,V as c,u as l,b as u,d as p,f as m,g as d,h as y,R as h,B as f,i as g,M as x,j as w}from"./three-_mx8BMNd.js";function j({position:a=[0,0,30],gravity:c=[0,-40,0],fov:l=35,transparent:u=!1}){const[p,m]=r.useState(!1),[d,y]=r.useState(!1);return r.useEffect(()=>{(()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),r=navigator.deviceMemory&&navigator.deviceMemory<4,t=navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4;(e||r||t)&&y(!0)})()},[]),p||d?e.jsx("div",{className:"w-full h-screen"}):e.jsx("div",{className:"relative z-0 w-full h-screen flex justify-center items-center transform scale-100 origin-center",children:e.jsxs(t,{camera:{position:a,fov:l},gl:{alpha:u,antialias:!1,powerPreference:"high-performance"},onCreated:({gl:e})=>{e.setClearColor(new n(0),u?0:1),e.setPixelRatio(Math.min(window.devicePixelRatio,2))},onError:()=>m(!0),children:[e.jsx("ambientLight",{intensity:10}),e.jsx(s,{gravity:c,timeStep:1/30,children:e.jsx(v,{})}),e.jsxs(i,{blur:.75,background:!1,children:[e.jsx(o,{intensity:2.5,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[50,.1,1]}),e.jsx(o,{intensity:2.5,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[50,.1,1]})]})]})})}function v({maxSpeed:t=50,minSpeed:n=0}){const s=r.useRef(null),i=r.useRef(null),o=r.useRef(null),a=r.useRef(null),x=r.useRef(null),w=r.useRef(null),j=new c,v=new c,P=new c,b=new c,z={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:4,linearDamping:4},{nodes:M,materials:S}=l("/assets/card-BP4TWJmK.glb"),E=u("/assets/profilepic-BZ_h-oty.png");E.flipY=!1,E.repeat.set(1.25,1.25),E.offset.set(.3,.15),E.center.set(.5,.5),E.rotation=0;const[R]=r.useState(()=>new p([new c,new c,new c,new c,new c])),[C,L]=r.useState(!1),[N,F]=r.useState(!1),[k,B]=r.useState(()=>"undefined"!=typeof window&&window.innerWidth<1024);return r.useEffect(()=>{const e=()=>{B(window.innerWidth<1024)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),m(i,o,[[0,0,0],[0,0,0],1]),m(o,a,[[0,0,0],[0,0,0],1]),m(a,x,[[0,0,0],[0,0,0],1]),d(x,w,[[0,0,0],[0,1.45,0]]),r.useEffect(()=>{if(N)return document.body.style.cursor=C?"grabbing":"grab",()=>{document.body.style.cursor="auto"}},[N,C]),r.useEffect(()=>{if(s.current?.geometry){const e=[new c(0,0,0),new c(0,-1,0)];s.current.geometry.setPoints(e)}},[]),y((e,r)=>{if(C&&"boolean"!=typeof C&&(j.set(e.pointer.x,e.pointer.y,.5).unproject(e.camera),b.copy(j).sub(e.camera.position).normalize(),j.add(b.multiplyScalar(e.camera.position.length())),[w,o,a,x,i].forEach(e=>e.current?.wakeUp()),w.current?.setNextKinematicTranslation({x:j.x-C.x,y:j.y-C.y,z:j.z-C.z})),i.current&&o.current&&a.current&&x.current&&w.current&&s.current?.geometry){[o,a].forEach(e=>{const s=e.current.translation?.();if(!s)return;e.current.lerped||(e.current.lerped=(new c).copy(s));const i=e.current.lerped.distanceTo(s),o=Math.max(.1,Math.min(1,i));e.current.lerped.lerp(s,r*(n+o*(t-n)))});const e=w.current.translation?.(),l=x.current.translation?.(),u=a.current.lerped,p=o.current.lerped,m=i.current.translation?.();if(!(e&&l&&u&&p&&m))return;if(((...e)=>e.some(e=>!Number.isFinite(e)))(e.x,e.y,e.z,l.x,l.y,l.z,u.x,u.y,u.z,p.x,p.y,p.z,m.x,m.y,m.z))return;const d=new c(e.x,e.y+.25,e.z);R.points[0].copy(d),R.points[1].copy(l),R.points[2].copy(u),R.points[3].copy(p),R.points[4]=(new c).copy(m);const y=R.getPoints(32);y.every(e=>Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z))&&s.current.geometry.setPoints(y),v.copy(w.current.angvel()),P.copy(w.current.rotation()),w.current.setAngvel({x:v.x,y:v.y-.25*P.y,z:v.z})}}),R.curveType="chordal",e.jsxs(e.Fragment,{children:[e.jsxs("group",{position:[0,6,0],children:[e.jsx(h,{ref:i,...z,type:"fixed",position:[0,0,0]}),e.jsx(h,{position:[0,-.5,0],ref:o,...z,type:"dynamic",children:e.jsx(f,{args:[.1]})}),e.jsx(h,{position:[0,-1,0],ref:a,...z,type:"dynamic",children:e.jsx(f,{args:[.1]})}),e.jsx(h,{position:[0,-1.5,0],ref:x,...z,type:"dynamic",children:e.jsx(f,{args:[.1]})}),e.jsxs(h,{position:[0,-2,0],ref:w,...z,type:C?"kinematicPosition":"dynamic",children:[e.jsx(g,{args:[.8,1.125,.01]}),e.jsx("group",{scale:1.2,position:[0,-1.2,-.05],onPointerOver:()=>F(!0),onPointerOut:()=>F(!1),onPointerUp:e=>{e.target.releasePointerCapture(e.pointerId),L(!1)},onPointerDown:e=>{e.target.setPointerCapture(e.pointerId),L((new c).copy(e.point).sub(j.copy(w.current.translation())))},children:M&&S?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{geometry:M.card.geometry,children:e.jsx("meshPhysicalMaterial",{map:E,clearcoat:1,clearcoatRoughness:.15,roughness:.9,metalness:.8})}),e.jsx("mesh",{geometry:M.clip.geometry,material:S.metal,"material-roughness":.3}),e.jsx("mesh",{geometry:M.clamp.geometry,material:S.metal})]}):e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1.6,2.25,.02]}),e.jsx("meshPhysicalMaterial",{color:"#ffffff",clearcoat:1,clearcoatRoughness:.15,roughness:.9,metalness:.8})]})})]})]}),e.jsxs("mesh",{ref:s,children:[e.jsx("meshLineGeometry",{points:[new c(0,0,0),new c(0,-1,0)]}),e.jsx("meshLineMaterial",{color:"black",depthTest:!0,resolution:k?[1e3,2e3]:[1e3,1e3],lineWidth:1,transparent:!1,opacity:1})]})]})}a({MeshLineGeometry:x,MeshLineMaterial:w});export{j as default};
