import{j as e,C as F,a as O,P as A,E as N,L as k,e as U,V as n,u as W,b as J,d as V,f as R,g as H,h as K,R as x,B as E,i as Y,M as q,k as Q}from"./three.js";import{r as t}from"./vendor.js";const X="/assets/card.glb",Z="/assets/profilepic.png";U({MeshLineGeometry:q,MeshLineMaterial:Q});function re({position:M=[0,0,30],gravity:g=[0,-40,0],fov:w=35,transparent:a=!1}){const[i,c]=t.useState(!1),[d,s]=t.useState(!1);return t.useEffect(()=>{(()=>{const m=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),j=navigator.deviceMemory&&navigator.deviceMemory<4,P=navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4;(m||j||P)&&s(!0)})()},[]),i||d?e.jsx("div",{className:"w-full h-screen"}):e.jsx("div",{className:"relative z-0 w-full h-screen flex justify-center items-center transform scale-100 origin-center",children:e.jsxs(F,{camera:{position:M,fov:w},gl:{alpha:a,antialias:!1,powerPreference:"high-performance"},onCreated:({gl:o})=>{o.setClearColor(new O(0),a?0:1),o.setPixelRatio(Math.min(window.devicePixelRatio,2))},onError:()=>c(!0),children:[e.jsx("ambientLight",{intensity:10}),e.jsx(A,{gravity:g,timeStep:1/30,children:e.jsx(_,{})}),e.jsxs(N,{blur:.75,children:[e.jsx(k,{intensity:2.5,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[50,.1,1]}),e.jsx(k,{intensity:2.5,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[50,.1,1]})]})]})})}function _({maxSpeed:M=50,minSpeed:g=0}){const w=t.useRef(null),a=t.useRef(null),i=t.useRef(null),c=t.useRef(null),d=t.useRef(null),s=t.useRef(null),o=new n,m=new n,j=new n,P=new n,h={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:4,linearDamping:4},{nodes:v,materials:C}=W(X),f=J(Z);f.flipY=!1,f.repeat.set(1.45,1.45),f.offset.set(.365,.05),f.center.set(.5,.5),f.rotation=0;const[l]=t.useState(()=>new V([new n,new n,new n,new n,new n])),[u,L]=t.useState(!1),[S,z]=t.useState(!1),[B,I]=t.useState(()=>typeof window<"u"?window.innerWidth<1024:!1);return t.useEffect(()=>{const r=()=>{I(window.innerWidth<1024)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),R(a,i,[[0,0,0],[0,0,0],1]),R(i,c,[[0,0,0],[0,0,0],1]),R(c,d,[[0,0,0],[0,0,0],1]),H(d,s,[[0,0,0],[0,1.45,0]]),t.useEffect(()=>{if(S)return document.body.style.cursor=u?"grabbing":"grab",()=>{document.body.style.cursor="auto"}},[S,u]),K((r,G)=>{var T;if(u&&typeof u!="boolean"&&(o.set(r.pointer.x,r.pointer.y,.5).unproject(r.camera),P.copy(o).sub(r.camera.position).normalize(),o.add(P.multiplyScalar(r.camera.position.length())),[s,i,c,d,a].forEach(y=>{var b;return(b=y.current)==null?void 0:b.wakeUp()}),(T=s.current)==null||T.setNextKinematicTranslation({x:o.x-u.x,y:o.y-u.y,z:o.z-u.z})),a.current){[i,c].forEach(p=>{p.current.lerped||(p.current.lerped=new n().copy(p.current.translation()));const D=Math.max(.1,Math.min(1,p.current.lerped.distanceTo(p.current.translation())));p.current.lerped.lerp(p.current.translation(),G*(g+D*(M-g)))});const y=s.current.translation(),b=new n(y.x,y.y+.25,y.z);l.points[0].copy(b),l.points[1].copy(d.current.translation()),l.points[2].copy(c.current.lerped),l.points[3].copy(i.current.lerped),l.points[4]=new n,l.points[4].copy(a.current.translation()),w.current.geometry.setPoints(l.getPoints(32)),m.copy(s.current.angvel()),j.copy(s.current.rotation()),s.current.setAngvel({x:m.x,y:m.y-j.y*.25,z:m.z})}}),l.curveType="chordal",e.jsxs(e.Fragment,{children:[e.jsxs("group",{position:[0,6,0],children:[e.jsx(x,{ref:a,...h,type:"fixed",position:[0,0,0]}),e.jsx(x,{position:[0,-.5,0],ref:i,...h,type:"dynamic",children:e.jsx(E,{args:[.1]})}),e.jsx(x,{position:[0,-1,0],ref:c,...h,type:"dynamic",children:e.jsx(E,{args:[.1]})}),e.jsx(x,{position:[0,-1.5,0],ref:d,...h,type:"dynamic",children:e.jsx(E,{args:[.1]})}),e.jsxs(x,{position:[0,-2,0],ref:s,...h,type:u?"kinematicPosition":"dynamic",children:[e.jsx(Y,{args:[.8,1.125,.01]}),e.jsx("group",{scale:1.2,position:[0,-1.2,-.05],onPointerOver:()=>z(!0),onPointerOut:()=>z(!1),onPointerUp:r=>{r.target.releasePointerCapture(r.pointerId),L(!1)},onPointerDown:r=>{r.target.setPointerCapture(r.pointerId),L(new n().copy(r.point).sub(o.copy(s.current.translation())))},children:v&&C?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{geometry:v.card.geometry,children:e.jsx("meshPhysicalMaterial",{map:f,clearcoat:1,clearcoatRoughness:.15,roughness:.9,metalness:.8})}),e.jsx("mesh",{geometry:v.clip.geometry,material:C.metal,"material-roughness":.3}),e.jsx("mesh",{geometry:v.clamp.geometry,material:C.metal})]}):e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1.6,2.25,.02]}),e.jsx("meshPhysicalMaterial",{color:"#ffffff",clearcoat:1,clearcoatRoughness:.15,roughness:.9,metalness:.8})]})})]})]}),e.jsxs("mesh",{ref:w,children:[e.jsx("meshLineGeometry",{}),e.jsx("meshLineMaterial",{color:"black",depthTest:!0,resolution:B?[1e3,2e3]:[1e3,1e3],lineWidth:1,transparent:!1,opacity:1})]})]})}export{re as default};
